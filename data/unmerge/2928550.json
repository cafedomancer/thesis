{"issue_url": "https://api.github.com/repos/rails/rails/issues/3795", "repo": "rails", "body": "I did some benchmarking. There seems to be a small performance boost from the commit, since it causes Rack to use the Rails logger less frequently.\r\n\r\nThis gist (https://gist.github.com/1404199) includes a file for the benchmarking code and files for sample output both with and without the config variable `config.assets.logger = false`.\r\n\r\nIn each benchmark report, the first and third lines use *before_dispatch(env)* as it was before my commit, and the second and fourth lines use *before_dispatch(env)* (renamed *before_dispatch_modified(env)* here) from my commit. I repeat each, in alternating order, to help account for normal benchmarking fluctuations.\r\n\r\nIf you include `config.assets.logger = false` there are fewer calls to the Rails logger and that results in slightly improved performance. For users who do not include the config variable, there is no performance cost (as measured by the benchmark module).\r\n\r\nWithout the config line specified, the conditional that I added immediately evaluates to true in every case. In the benchmarking reports, sometimes the *before_dispatch(env)* is faster, sometimes *before_dispatch_modified(env)* is.\r\n\r\n```\r\nStarted GET \"/assets/application.css?body=1\" for 127.0.0.1 at 2011-11-29 03:04:24 -0800\r\n\r\n\r\nStarted GET \"/assets/application.css?body=1\" for 127.0.0.1 at 2011-11-29 03:04:24 -0800\r\n\r\n\r\nStarted GET \"/assets/application.css?body=1\" for 127.0.0.1 at 2011-11-29 03:04:24 -0800\r\n\r\n\r\nStarted GET \"/assets/application.css?body=1\" for 127.0.0.1 at 2011-11-29 03:04:24 -0800\r\nServed asset /application.css - 200 OK (1ms)\r\n      user     system      total        real\r\n  0.000000   0.000000   0.000000 (  0.000178)\r\n  0.000000   0.000000   0.000000 (  0.000125)\r\n  0.000000   0.000000   0.000000 (  0.000088)\r\n  0.000000   0.000000   0.000000 (  0.000091)\r\n```\r\n\r\nWith the config line `config.assets.logger = false` included, sometimes the conditional evaluates to true and logs (if the path doesn't start with \"/assets/\"), sometimes to false (if it does start with \"/assets/\"). Performance is consistently faster than without the config line for false evaluations, and true evaluations have results that are similar to the no-config results.\r\n\r\n```\r\nStarted GET \"/assets/application.css?body=1\" for 127.0.0.1 at 2011-11-29 03:03:18 -0800\r\n\r\n\r\nStarted GET \"/assets/application.css?body=1\" for 127.0.0.1 at 2011-11-29 03:03:18 -0800\r\n      user     system      total        real\r\n  0.000000   0.000000   0.000000 (  0.000191)\r\n  0.000000   0.000000   0.000000 (  0.000075)\r\n  0.000000   0.000000   0.000000 (  0.000114)\r\n  0.000000   0.000000   0.000000 (  0.000063)\r\n```\r\n\r\nSo there seems to be a side benefit of a performance gain of a few ten-thousandths of a second for each request.\r\n", "_id": {"$oid": "5238317ebd3543c15100f77a"}, "issue_id": 3795, "url": "https://api.github.com/repos/rails/rails/issues/comments/2928550", "html_url": "https://github.com/rails/rails/pull/3795#issuecomment-2928550", "updated_at": "2011-11-29T11:24:15Z", "user": {"subscriptions_url": "https://api.github.com/users/ciscoriordan/subscriptions", "events_url": "https://api.github.com/users/ciscoriordan/events{/privacy}", "repos_url": "https://api.github.com/users/ciscoriordan/repos", "gists_url": "https://api.github.com/users/ciscoriordan/gists{/gist_id}", "url": "https://api.github.com/users/ciscoriordan", "login": "ciscoriordan", "gravatar_id": "408016ab4c062f421c418946185aa232", "html_url": "https://github.com/ciscoriordan", "following_url": "https://api.github.com/users/ciscoriordan/following{/other_user}", "received_events_url": "https://api.github.com/users/ciscoriordan/received_events", "organizations_url": "https://api.github.com/users/ciscoriordan/orgs", "avatar_url": "https://2.gravatar.com/avatar/408016ab4c062f421c418946185aa232?d=https%3A%2F%2Fidenticons.github.com%2Fb5c1749aa589fbd0cad9fdd7d117386b.png", "starred_url": "https://api.github.com/users/ciscoriordan/starred{/owner}{/repo}", "id": 425855, "followers_url": "https://api.github.com/users/ciscoriordan/followers", "type": "User"}, "created_at": "2011-11-29T11:24:15Z", "id": 2928550, "owner": "rails"}
