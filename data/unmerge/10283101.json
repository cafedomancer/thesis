{"body": "I don't think it's quite as simple as you suggest. Due to the way older versions of Mocha used to monkey-patch Test::Unit and MiniTest (because there were no suitable hooks in those libraries), the Mocha-related code in ActiveSupport::TestCase (and associated modules) was necessary not just to be able to run Rails' own tests, but also to be able to use Mocha in tests in any Rails project.\r\n\r\nThe latest version of Mocha no longer does any monkey-patching of Test::Unit or MiniTest and so the reason to have this code in Rails is only for the reason you describe i.e. for Rails' own tests.\r\n\r\nIf you want to allow people to use older versions of Mocha in Rails projects, then you will need these changes. However, given that these changes would only be incorporated into a new release of Rails, it seems reasonable to require them to upgrade to the latest version of Mocha at the same time as upgrading to the new version of Rails.\r\n\r\nI hope that makes sense.", "url": "https://api.github.com/repos/rails/rails/issues/comments/10283101", "created_at": "2012-11-12T10:44:15Z", "html_url": "https://github.com/rails/rails/pull/8181#issuecomment-10283101", "updated_at": "2012-11-12T10:44:15Z", "repo": "rails", "issue_id": 8181, "user": {"following_url": "https://api.github.com/users/floehopper/following{/other_user}", "events_url": "https://api.github.com/users/floehopper/events{/privacy}", "organizations_url": "https://api.github.com/users/floehopper/orgs", "url": "https://api.github.com/users/floehopper", "gists_url": "https://api.github.com/users/floehopper/gists{/gist_id}", "html_url": "https://github.com/floehopper", "subscriptions_url": "https://api.github.com/users/floehopper/subscriptions", "avatar_url": "https://1.gravatar.com/avatar/f1c2a5fff725fde524bb84503528bd1e?d=https%3A%2F%2Fidenticons.github.com%2F7a98af17e63a0ac09ce2e96d03992fbc.png", "repos_url": "https://api.github.com/users/floehopper/repos", "received_events_url": "https://api.github.com/users/floehopper/received_events", "gravatar_id": "f1c2a5fff725fde524bb84503528bd1e", "starred_url": "https://api.github.com/users/floehopper/starred{/owner}{/repo}", "login": "floehopper", "type": "User", "id": 3169, "followers_url": "https://api.github.com/users/floehopper/followers"}, "owner": "rails", "_id": {"$oid": "5237f54cbd3543c15100abb8"}, "id": 10283101, "issue_url": "https://api.github.com/repos/rails/rails/issues/8181"}
