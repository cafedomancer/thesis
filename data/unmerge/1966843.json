{"body": "You escape the value, even though it might not be used. It'd be faster to not do so if the value is empty.\r\nActually, it seems you're making this quite complicated. You could do :\r\n\r\n    final_value = value.is_a?(Array) ? value.join(\" \") : value\r\n    unless final_value.blank?\r\n      final_value = ERB::Util.html_escape(final_value) if escape\r\n      attrs << %(#{key}=\"#{final_value}\")\r\n    end\r\n\r\nCould you also squash your two commits into one please ?", "url": "https://api.github.com/repos/rails/rails/issues/comments/1966843", "created_at": "2011-09-01T10:41:59Z", "html_url": "https://github.com/rails/rails/pull/2792#issuecomment-1966843", "updated_at": "2011-09-01T10:42:15Z", "repo": "rails", "issue_id": 2792, "user": {"following_url": "https://api.github.com/users/dmathieu/following{/other_user}", "events_url": "https://api.github.com/users/dmathieu/events{/privacy}", "organizations_url": "https://api.github.com/users/dmathieu/orgs", "url": "https://api.github.com/users/dmathieu", "gists_url": "https://api.github.com/users/dmathieu/gists{/gist_id}", "html_url": "https://github.com/dmathieu", "subscriptions_url": "https://api.github.com/users/dmathieu/subscriptions", "avatar_url": "https://2.gravatar.com/avatar/6fa1cdda524d49996a8bc6917328de3d?d=https%3A%2F%2Fidenticons.github.com%2F71ee911dd06428a96c143a0b135041a4.png", "repos_url": "https://api.github.com/users/dmathieu/repos", "received_events_url": "https://api.github.com/users/dmathieu/received_events", "gravatar_id": "6fa1cdda524d49996a8bc6917328de3d", "starred_url": "https://api.github.com/users/dmathieu/starred{/owner}{/repo}", "login": "dmathieu", "type": "User", "id": 9347, "followers_url": "https://api.github.com/users/dmathieu/followers"}, "owner": "rails", "_id": {"$oid": "52383fbebd3543c15101075b"}, "id": 1966843, "issue_url": "https://api.github.com/repos/rails/rails/issues/2792"}
