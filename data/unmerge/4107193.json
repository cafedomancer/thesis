{"body": "we also aren't escaping u2029 (similar to u2028) which javascript interprets as a new line. i'm not sure if this is an exploitable xss issue or not in current rails. i can create js errors with it but i didn't try to inject code with it. if the developer does something like the following which you might expect to be safe because you believe the function escapes all new line characters (i would hope that no-one would write code like this) :\r\n\r\n    // <%= escape_javascript user_influenced_variable %>\r\n\r\nthen it is exploitable. i don't know of any other way to exploit it.\r\n\r\nsee section 7.8.4 for string literals and section 7.3 for line terminators:\r\nhttp://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf\r\n\r\ni'm not sure what other characters we should be escaping. the standard says they should all be safe except line terminators and reverse solidus (\\) but maybe control characters in 0000->0001F range might do funny things in some browsers.", "url": "https://api.github.com/repos/rails/rails/issues/comments/4107193", "created_at": "2012-02-22T16:13:51Z", "html_url": "https://github.com/rails/rails/pull/5127#issuecomment-4107193", "updated_at": "2012-02-22T16:52:28Z", "repo": "rails", "issue_id": 5127, "user": {"following_url": "https://api.github.com/users/benmmurphy/following{/other_user}", "events_url": "https://api.github.com/users/benmmurphy/events{/privacy}", "organizations_url": "https://api.github.com/users/benmmurphy/orgs", "url": "https://api.github.com/users/benmmurphy", "gists_url": "https://api.github.com/users/benmmurphy/gists{/gist_id}", "html_url": "https://github.com/benmmurphy", "subscriptions_url": "https://api.github.com/users/benmmurphy/subscriptions", "avatar_url": "https://1.gravatar.com/avatar/d586b2a89d2bafb77504ddea33b03fb9?d=https%3A%2F%2Fidenticons.github.com%2F54fb4af779a69dd1f7eb03623b3f1580.png", "repos_url": "https://api.github.com/users/benmmurphy/repos", "received_events_url": "https://api.github.com/users/benmmurphy/received_events", "gravatar_id": "d586b2a89d2bafb77504ddea33b03fb9", "starred_url": "https://api.github.com/users/benmmurphy/starred{/owner}{/repo}", "login": "benmmurphy", "type": "User", "id": 392520, "followers_url": "https://api.github.com/users/benmmurphy/followers"}, "owner": "rails", "_id": {"$oid": "52381c89bd3543c15100e4e1"}, "id": 4107193, "issue_url": "https://api.github.com/repos/rails/rails/issues/5127"}
