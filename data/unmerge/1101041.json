{"updated_at": "2011-05-04T17:22:32Z", "repo": "rails", "created_at": "2011-05-04T17:22:32Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/1101041", "id": 1101041, "issue_url": "https://api.github.com/repos/rails/rails/issues/207", "issue_id": 207, "user": {"repos_url": "https://api.github.com/users/snowmoonsoftware/repos", "type": "User", "html_url": "https://github.com/snowmoonsoftware", "starred_url": "https://api.github.com/users/snowmoonsoftware/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snowmoonsoftware/subscriptions", "following_url": "https://api.github.com/users/snowmoonsoftware/following{/other_user}", "gravatar_id": "93ae2c2803251ab8e72a7c29d7950dc2", "organizations_url": "https://api.github.com/users/snowmoonsoftware/orgs", "url": "https://api.github.com/users/snowmoonsoftware", "gists_url": "https://api.github.com/users/snowmoonsoftware/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/93ae2c2803251ab8e72a7c29d7950dc2?d=https%3A%2F%2Fidenticons.github.com%2F89dfb67cf0445a39987f674f56a492ce.png", "id": 22698, "events_url": "https://api.github.com/users/snowmoonsoftware/events{/privacy}", "login": "snowmoonsoftware", "received_events_url": "https://api.github.com/users/snowmoonsoftware/received_events", "followers_url": "https://api.github.com/users/snowmoonsoftware/followers"}, "body": "With this patch I still see a problem with find_or_create_by with multiple parameters:\r\n\r\n```\r\np.niod_metrics.find_or_create_by_metric_type_id_and_month(666, Date.parse('2011-06-01'))\r\n\r\nNiodMetric Load (0.5ms)   SELECT * FROM 'niod_metrics' WHERE ('niod_metrics'.'month' IS NULL AND \r\n'niod_metrics'.'metric_type_id' IN( 666,'2011-06-01' )) AND ('niod_metrics'.niodmetrics_id = 1750 AND \r\n'niod_metrics'.niodmetrics_type = 'Profile') LIMIT 1\r\n\r\nNiodMetric Create (0.2ms)   INSERT INTO 'niod_metrics' ('created_at', 'month', 'updated_at', 'last_activity_at', \r\n'niodmetrics_type', 'value', 'metric_type_id', 'niodmetrics_id') VALUES('2011-05-04 17:10:44', '2011-06-01', \r\n'2011-05-04 17:10:44', NULL, 'Profile', NULL, 666, 1750)\r\n```\r\nThe insert is correct, but the find isn't. This is blocking a move from rails 2.3.4 to 2.3.11.", "_id": {"$oid": "523865b5bd3543c151012728"}, "html_url": "https://github.com/rails/rails/pull/207#issuecomment-1101041"}
