{"updated_at": "2011-06-24T18:45:53Z", "repo": "rails", "created_at": "2011-06-24T18:45:53Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/1434356", "id": 1434356, "issue_url": "https://api.github.com/repos/rails/rails/issues/1846", "issue_id": 1846, "user": {"repos_url": "https://api.github.com/users/pixeltrix/repos", "type": "User", "html_url": "https://github.com/pixeltrix", "starred_url": "https://api.github.com/users/pixeltrix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pixeltrix/subscriptions", "following_url": "https://api.github.com/users/pixeltrix/following{/other_user}", "gravatar_id": "b14001f2b40640dd6cb63f0e8f1f4869", "organizations_url": "https://api.github.com/users/pixeltrix/orgs", "url": "https://api.github.com/users/pixeltrix", "gists_url": "https://api.github.com/users/pixeltrix/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/b14001f2b40640dd6cb63f0e8f1f4869?d=https%3A%2F%2Fidenticons.github.com%2F7cb36e23529e4de4c41460940cc85e6e.png", "id": 6321, "events_url": "https://api.github.com/users/pixeltrix/events{/privacy}", "login": "pixeltrix", "received_events_url": "https://api.github.com/users/pixeltrix/received_events", "followers_url": "https://api.github.com/users/pixeltrix/followers"}, "body": "Upon further investigation the current behaviour already doesn't save unless there's been a change to the session. It uses the standard AR::Dirty change tracking and your patch essentially replicates that but changes the semantics of the save so that it returns false because of callback cancelling the save. This changes the empty BEGIN ... COMMIT to BEGIN ... ROLLBACK. It may be that this empty transaction is hurting your performance in which case you may want to implement a custom SQL session class.", "_id": {"$oid": "52384d5fbd3543c1510114da"}, "html_url": "https://github.com/rails/rails/pull/1846#issuecomment-1434356"}
