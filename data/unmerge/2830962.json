{"updated_at": "2011-11-22T06:25:20Z", "repo": "rails", "created_at": "2011-11-22T06:25:20Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/2830962", "id": 2830962, "issue_url": "https://api.github.com/repos/rails/rails/issues/3716", "issue_id": 3716, "user": {"repos_url": "https://api.github.com/users/marcandre/repos", "type": "User", "html_url": "https://github.com/marcandre", "starred_url": "https://api.github.com/users/marcandre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcandre/subscriptions", "following_url": "https://api.github.com/users/marcandre/following{/other_user}", "gravatar_id": "b06d8e26b92456b228d3c77b66397534", "organizations_url": "https://api.github.com/users/marcandre/orgs", "url": "https://api.github.com/users/marcandre", "gists_url": "https://api.github.com/users/marcandre/gists{/gist_id}", "avatar_url": "https://1.gravatar.com/avatar/b06d8e26b92456b228d3c77b66397534?d=https%3A%2F%2Fidenticons.github.com%2F8b48ea597d2862688e4aa8a2b28651a3.png", "id": 33770, "events_url": "https://api.github.com/users/marcandre/events{/privacy}", "login": "marcandre", "received_events_url": "https://api.github.com/users/marcandre/received_events", "followers_url": "https://api.github.com/users/marcandre/followers"}, "body": "I agree one must be super careful when patching native methods (I should know, I've patched 100s of 'em in my backports gem!). Here there's no real risk, though, as the original  `Array#join` is called unless the array starts with a SafeBuffer. For SafeBuffers, one could make a simpler version that escapes the other elements if need be and call the original `Array#join`.\r\n\r\nAlthough I still believe `Array#join` should be patched, another alternative is to provide this functionality as a new method, say `Array#safe_join`. Or it could always return a SafeBuffer like the `xss_aware_join` of the [blog post](https://makandracards.com/makandra/954-don-t-mix-array-join-and-string-html_safe) I mentioned.\r\n\r\nNot providing *any* way to build SafeBuffers from arrays is just a encouraging bad behavior. Either we patch `Array#join` (my vote) or we provide an alternative method, but the status quo isn't helping!\r\n\r\nThanks", "_id": {"$oid": "523832b1bd3543c15100f8f2"}, "html_url": "https://github.com/rails/rails/pull/3716#issuecomment-2830962"}
