{"updated_at": "2013-08-19T03:49:12Z", "repo": "rails", "created_at": "2013-08-19T03:49:12Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/22849646", "id": 22849646, "issue_url": "https://api.github.com/repos/rails/rails/issues/11908", "issue_id": 11908, "user": {"repos_url": "https://api.github.com/users/jackxxu/repos", "type": "User", "html_url": "https://github.com/jackxxu", "starred_url": "https://api.github.com/users/jackxxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackxxu/subscriptions", "following_url": "https://api.github.com/users/jackxxu/following{/other_user}", "gravatar_id": "6e0b6bbdf7f2b9b30463acde65a7174b", "organizations_url": "https://api.github.com/users/jackxxu/orgs", "url": "https://api.github.com/users/jackxxu", "gists_url": "https://api.github.com/users/jackxxu/gists{/gist_id}", "avatar_url": "https://2.gravatar.com/avatar/6e0b6bbdf7f2b9b30463acde65a7174b?d=https%3A%2F%2Fidenticons.github.com%2Ffd3466885ec63f3dfb76b9118b279c4d.png", "id": 428169, "events_url": "https://api.github.com/users/jackxxu/events{/privacy}", "login": "jackxxu", "received_events_url": "https://api.github.com/users/jackxxu/received_events", "followers_url": "https://api.github.com/users/jackxxu/followers"}, "body": "@jeremy, if I understand your comment correctly, the presenter pattern you suggested will look something like this.\r\n\r\n```ruby\r\nEmployee  = Struct.new(:name, :employee_id)\r\nGuest     = Struct.new(:name)\r\n\r\nPerson = Struct.new(:record) do\r\n  def employee_id\r\n    if @record.respond_to?(:employee_id)\r\n      @record.employee_id\r\n    else\r\n      'N/A'\r\n    end\r\n  end\r\n\r\n  def name; @record.name; end\r\n\r\n  def name\r\n    if @record.respond_to?(:birth_date)\r\n      @record.birth_date\r\n    else\r\n      nil\r\n    end\r\n  end\r\n\r\n  def ssn; 'N/A'; end\r\nend\r\n\r\nEntry     = Struct.new(:person) do\r\n  delegate :name, :to => :person, :allow_nil => true\r\n  delegate :employee_id, :to => :person\r\n  delegate :birth_date, :to => :person\r\n  delegate :ssn, :to => :person, :allow_nil => true\r\nend\r\n\r\nguest_entry = Entry.new(Person.new(Guest.new('John'))\r\n```\r\n\r\nAs you can see, it just seems to be quite a bit of code, for what a simple DSL can cover. Also, one layer of more layer of presenter adds an additional delegation. \r\n\r\nIt depends on how much functionalities are best suited for the delegate domain. If we feel that it should strictly be a simple delegate, the default option is better suited in a presenter class somewhere; however, enriching the delegate DSL a little by this optional param seems to make the code more concise and readable.\r\n", "_id": {"$oid": "5237d05bbd3543c151007c98"}, "html_url": "https://github.com/rails/rails/pull/11908#issuecomment-22849646"}
