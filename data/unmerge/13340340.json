{"issue_url": "https://api.github.com/repos/rails/rails/issues/9230", "repo": "rails", "body": "Why should it be longer for the diff? I thought the point of this was to be\r\nconstant time. It does not appear to be that way. I suspect it is doing a\r\nfast initial.comparison that fails for the different strings and falls back\r\non a slower version.  For example, it might attempt a byte by byte\r\ncomparison and then failong that attempt a unicode character comparison.\r\n\r\nWe could certainly read the implementation of == to know for sure. In any\r\ncase, since constant time comparison is not part of =='s contract, we can't\r\nuse it.\r\n\r\n- Charlie (mobile)\r\nOn Feb 9, 2013 4:06 PM, \"Andrew White\" <notifications@github.com> wrote:\r\n\r\n> @headius <https://github.com/headius> your reasoning is correct, however\r\n> the large difference you're seeing is down to the fact that val1 and val2\r\n> are the same object so the comparison is being short circuited - if you\r\n> change val2 to be val2 = val1.dup then the result is much closer. The\r\n> comparison for the same string should take longer than the one that differs\r\n> in the first character.\r\n>\r\n> \u2014\r\n> Reply to this email directly or view it on GitHub<https://github.com/rails/rails/pull/9230#issuecomment-13339706>..\r\n>\r\n>", "_id": {"$oid": "5237ebebbd3543c151009c06"}, "issue_id": 9230, "url": "https://api.github.com/repos/rails/rails/issues/comments/13340340", "html_url": "https://github.com/rails/rails/pull/9230#issuecomment-13340340", "updated_at": "2013-02-09T22:48:08Z", "user": {"subscriptions_url": "https://api.github.com/users/headius/subscriptions", "events_url": "https://api.github.com/users/headius/events{/privacy}", "repos_url": "https://api.github.com/users/headius/repos", "gists_url": "https://api.github.com/users/headius/gists{/gist_id}", "url": "https://api.github.com/users/headius", "login": "headius", "gravatar_id": "f1d37642fdaa1662ff46e4c65731e9ab", "html_url": "https://github.com/headius", "following_url": "https://api.github.com/users/headius/following{/other_user}", "received_events_url": "https://api.github.com/users/headius/received_events", "organizations_url": "https://api.github.com/users/headius/orgs", "avatar_url": "https://2.gravatar.com/avatar/f1d37642fdaa1662ff46e4c65731e9ab?d=https%3A%2F%2Fidenticons.github.com%2F36bedb6eb7152f39b16328448942822b.png", "starred_url": "https://api.github.com/users/headius/starred{/owner}{/repo}", "id": 10135, "followers_url": "https://api.github.com/users/headius/followers", "type": "User"}, "created_at": "2013-02-09T22:48:08Z", "id": 13340340, "owner": "rails"}
