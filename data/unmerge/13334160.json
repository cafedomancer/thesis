{"issue_url": "https://api.github.com/repos/rails/rails/issues/9230", "repo": "rails", "body": "@homakov please don't be offended if I don't take your tests as definitive proof that integer comparisons are constant time but lets assume for the moment that the timing difference is well within the [20 microsecond resolution][1] that remote timing attacks are susceptible to.\r\n\r\nGiven that it still doesn't make any difference as all you've done is split it into two timing attacks - the first one to get the correct hash value and then the second one to guess the HMAC. You'll be able to detect when you have the right hash value because the `&&` won't be short-circuted and the time taken will likely jump above the threshold as we are now comparing the strings. The second timing attack will be easier because you can eliminate all the HMACs that don't have the right hash value.\r\n\r\n[1]: http://www.cs.rice.edu/~dwallach/pub/crosby-timing2009.pdf", "_id": {"$oid": "5237ebebbd3543c151009bde"}, "issue_id": 9230, "url": "https://api.github.com/repos/rails/rails/issues/comments/13334160", "html_url": "https://github.com/rails/rails/pull/9230#issuecomment-13334160", "updated_at": "2013-02-09T17:00:50Z", "user": {"subscriptions_url": "https://api.github.com/users/pixeltrix/subscriptions", "events_url": "https://api.github.com/users/pixeltrix/events{/privacy}", "repos_url": "https://api.github.com/users/pixeltrix/repos", "gists_url": "https://api.github.com/users/pixeltrix/gists{/gist_id}", "url": "https://api.github.com/users/pixeltrix", "login": "pixeltrix", "gravatar_id": "b14001f2b40640dd6cb63f0e8f1f4869", "html_url": "https://github.com/pixeltrix", "following_url": "https://api.github.com/users/pixeltrix/following{/other_user}", "received_events_url": "https://api.github.com/users/pixeltrix/received_events", "organizations_url": "https://api.github.com/users/pixeltrix/orgs", "avatar_url": "https://0.gravatar.com/avatar/b14001f2b40640dd6cb63f0e8f1f4869?d=https%3A%2F%2Fidenticons.github.com%2F7cb36e23529e4de4c41460940cc85e6e.png", "starred_url": "https://api.github.com/users/pixeltrix/starred{/owner}{/repo}", "id": 6321, "followers_url": "https://api.github.com/users/pixeltrix/followers", "type": "User"}, "created_at": "2013-02-09T17:00:50Z", "id": 13334160, "owner": "rails"}
