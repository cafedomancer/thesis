{"body": "@drogus the data isn't invalid, just not present.\n\n@lunks it removes empty strings as well, so i think `deep_compact` would be misleading.  I'm sure a better name exists, perhaps `deep_clean`?\n\nIt's really just a convenience method for tightening up collections when you expect there to be empty data. When working with ActiveRecord objects nils and empty strings can often mean the same thing. A user submits a form and removes a phone number. That value is now an empty string. It's perfectly fine for the value to be an empty string (or nil) but I don't need it to be in the collection I'm working with. `compact` is nice, but I have to do additional processing to remove the strings, which is annoying.\n\n```ruby\n@phone_numbers = Person.all.map(&:phone_numbers).clean\n# [\n#  {:home => \"1-123-456-7890\", :work => [\"1-098-765-4321\", \"1-222-333-4444\"], :cell => \"1-802-123-3211\"},\n#  {:home => \"1-123-456-7890\" }\n#  ...\n# ]\n```\n\nThis could be from an ActiveRecord model that uses `store` or a serialized hash. ", "url": "https://api.github.com/repos/rails/rails/issues/comments/6943348", "created_at": "2012-07-12T18:24:00Z", "html_url": "https://github.com/rails/rails/pull/7008#issuecomment-6943348", "updated_at": "2012-07-12T18:50:06Z", "repo": "rails", "issue_id": 7008, "user": {"following_url": "https://api.github.com/users/seanbehan/following{/other_user}", "events_url": "https://api.github.com/users/seanbehan/events{/privacy}", "organizations_url": "https://api.github.com/users/seanbehan/orgs", "url": "https://api.github.com/users/seanbehan", "gists_url": "https://api.github.com/users/seanbehan/gists{/gist_id}", "html_url": "https://github.com/seanbehan", "subscriptions_url": "https://api.github.com/users/seanbehan/subscriptions", "avatar_url": "https://2.gravatar.com/avatar/09edaa101c1df80158e7ab4101a2e65a?d=https%3A%2F%2Fidenticons.github.com%2Fcba2e39793995b3b682da78f854786f2.png", "repos_url": "https://api.github.com/users/seanbehan/repos", "received_events_url": "https://api.github.com/users/seanbehan/received_events", "gravatar_id": "09edaa101c1df80158e7ab4101a2e65a", "starred_url": "https://api.github.com/users/seanbehan/starred{/owner}{/repo}", "login": "seanbehan", "type": "User", "id": 23435, "followers_url": "https://api.github.com/users/seanbehan/followers"}, "owner": "rails", "_id": {"$oid": "523800dcbd3543c15100c062"}, "id": 6943348, "issue_url": "https://api.github.com/repos/rails/rails/issues/7008"}
