{"updated_at": "2012-11-08T19:16:05Z", "repo": "rails", "created_at": "2012-11-08T19:16:05Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/10200812", "id": 10200812, "issue_url": "https://api.github.com/repos/rails/rails/issues/5813", "issue_id": 5813, "user": {"repos_url": "https://api.github.com/users/schorsch/repos", "type": "User", "html_url": "https://github.com/schorsch", "starred_url": "https://api.github.com/users/schorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schorsch/subscriptions", "following_url": "https://api.github.com/users/schorsch/following{/other_user}", "gravatar_id": "a03537ac14581e7c2de772104d21ba39", "organizations_url": "https://api.github.com/users/schorsch/orgs", "url": "https://api.github.com/users/schorsch", "gists_url": "https://api.github.com/users/schorsch/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/a03537ac14581e7c2de772104d21ba39?d=https%3A%2F%2Fidenticons.github.com%2F0a8a64171a9145f6a47e5b3544632e3b.png", "id": 13575, "events_url": "https://api.github.com/users/schorsch/events{/privacy}", "login": "schorsch", "received_events_url": "https://api.github.com/users/schorsch/received_events", "followers_url": "https://api.github.com/users/schorsch/followers"}, "body": "+1 \r\n\r\nEspecially needed when creating an object using nested_attributes of different sti types e.g.\r\n\r\n    class Item \r\n    class LineItem < Item\r\n    class Devider < Item\r\n    class Subtotal < Item\r\n\r\n    class Document \r\n      has_many :items\r\n      accepts_nested_attributes_for :items\r\n\r\n    Document.new items_attributes:[ {price: 1.0, type: 'LineItem'}, {type:'Devider', name: 'Some Info'}  ]\r\n\r\nWithout this patch AR instanciates the nested objects above, with class Item so some special methods only available in LineItem (e.g calculate_totals) can only be called after saving and reloading the document object.\r\n", "_id": {"$oid": "523ea094bd354364b9011820"}, "html_url": "https://github.com/rails/rails/pull/5813#issuecomment-10200812"}
