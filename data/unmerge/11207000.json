{"issue_url": "https://api.github.com/repos/rails/rails/issues/8430", "repo": "rails", "body": "Thanks for looking.  Will do.  I should point out, that without #8242 it can make the schema not load if using `SPATIAL` or `FULLTEXT` indexes:\r\n\r\n```\r\nclass CreatePizzas < ActiveRecord::Migration\r\n  def change\r\n    create_table :pizzas, :options => 'ENGINE=MyISAM' do |t|\r\n      t.string :awesome\r\n      t.timestamps\r\n    end\r\n\r\n    add_index :pizzas, :awesome, type: 'FULLTEXT'\r\n  end\r\n\r\nend\r\n```\r\n\r\nSuccessfully works and adds a table like:\r\n\r\n```\r\nmysql> show create table pizzas;\r\n+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n| Table  | Create Table                                                                                                                                                                                                                                                                                                                                       |\r\n+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n| pizzas | CREATE TABLE `pizzas` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `awesome` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,\r\n  `created_at` datetime DEFAULT NULL,\r\n  `updated_at` datetime DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  FULLTEXT KEY `index_pizzas_on_awesome` (`awesome`)\r\n) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci |\r\n+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n1 row in set (0.00 sec)\r\n```\r\n\r\n\r\nHowever, when loading the schema, it cannot add the index since the database engine isn't dumped as part of the schema:\r\n\r\n```\r\n[ruby-1.9.3@omg]:omg$ rake db:schema:load \r\n-- create_table(\"just_kiddings\", {:force=>true})\r\n   -> 0.0195s\r\n-- add_index(\"just_kiddings\", [\"awesome\"], {:name=>\"index_just_kiddings_on_awesome\", :type=>:fulltext})\r\nrake aborted!\r\nMysql2::Error: The used table type doesn't support FULLTEXT indexes: CREATE fulltext INDEX `index_just_kiddings_on_awesome` ON `just_kiddings` (`awesome`)\r\n\r\n```\r\n\r\n\r\nBecause the schema.rb file doesn't include the Engine info, but does include the index type info.\r\n\r\n```\r\n  create_table \"pizzas\", force: true do |t|\r\n    t.string   \"awesome\"\r\n    t.datetime \"created_at\"\r\n    t.datetime \"updated_at\"\r\n  end\r\n\r\n  add_index \"pizzas\", [\"awesome\"], name: \"index_pizzas_on_awesome\", type: :fulltext\r\n```\r\n\r\n", "_id": {"$oid": "5237f348bd3543c15100a7d8"}, "issue_id": 8430, "url": "https://api.github.com/repos/rails/rails/issues/comments/11207000", "html_url": "https://github.com/rails/rails/pull/8430#issuecomment-11207000", "updated_at": "2012-12-10T17:09:33Z", "user": {"subscriptions_url": "https://api.github.com/users/kenmazaika/subscriptions", "events_url": "https://api.github.com/users/kenmazaika/events{/privacy}", "repos_url": "https://api.github.com/users/kenmazaika/repos", "gists_url": "https://api.github.com/users/kenmazaika/gists{/gist_id}", "url": "https://api.github.com/users/kenmazaika", "login": "kenmazaika", "gravatar_id": "2a9b8f5273d934fe57daa8cf54c3a017", "html_url": "https://github.com/kenmazaika", "following_url": "https://api.github.com/users/kenmazaika/following{/other_user}", "received_events_url": "https://api.github.com/users/kenmazaika/received_events", "organizations_url": "https://api.github.com/users/kenmazaika/orgs", "avatar_url": "https://1.gravatar.com/avatar/2a9b8f5273d934fe57daa8cf54c3a017?d=https%3A%2F%2Fidenticons.github.com%2Fbf18a3924a0acd2ab4c5e1736db3d529.png", "starred_url": "https://api.github.com/users/kenmazaika/starred{/owner}{/repo}", "id": 233615, "followers_url": "https://api.github.com/users/kenmazaika/followers", "type": "User"}, "created_at": "2012-12-10T17:09:33Z", "id": 11207000, "owner": "rails"}
