{"issue_url": "https://api.github.com/repos/rails/rails/issues/8088", "repo": "rails", "body": "Sorry, but I don't like this. While this is a popular patten, adding this layer of indirection doesn't seem useful to me. The pattern is easily achievable using `each_with_object`, and overloading the defaults behaviour of hash actually introduces confusion for me\u2014I had to read the implementation to verify you were duping the default value like in your stated example with the array, and only when a boolean is passed, otherwise you'd get the same default instance.\r\n\r\nI don't see the useful difference between\r\n\r\n```ruby\r\n[1, 2, 2, 3].each_with_object(Hash.new { |hash, key| hash[key] = key }) { |value, hash| hash[value] **= 2 }\r\n```\r\n\r\nand\r\n\r\n```ruby\r\n[1, 2, 2, 3].each_with_hash(proc { |hash, key| hash[key] = key }) { |value, hash| hash[value] **= 2 }\r\n```\r\n\r\nand I find this just plain old confusing:\r\n\r\n```ruby\r\n[1, 2, 2, 3].each_with_hash(proc { |hash, key| key }, true) { |value, hash| hash[value] **= 2 }\r\n```\r\n\r\nwhat does `true` mean? A bare positional parameter like this usually introduces confusion.\r\n\r\nAdditionally, this breaks two convention introduced by `each_with_object`: the order of parameters is reversed (`el, object` vs `hash, el`), and it's not chainable (i.e. `.with_object` on an enumerator), but these would be easily fixed.", "_id": {"$oid": "523dad71bd354364b9008eed"}, "issue_id": 8088, "url": "https://api.github.com/repos/rails/rails/issues/comments/9968503", "html_url": "https://github.com/rails/rails/pull/8088#issuecomment-9968503", "updated_at": "2012-11-01T01:56:52Z", "user": {"subscriptions_url": "https://api.github.com/users/sj26/subscriptions", "events_url": "https://api.github.com/users/sj26/events{/privacy}", "repos_url": "https://api.github.com/users/sj26/repos", "gists_url": "https://api.github.com/users/sj26/gists{/gist_id}", "url": "https://api.github.com/users/sj26", "login": "sj26", "gravatar_id": "93a69a78c59a3219aa5d26fd612fd667", "html_url": "https://github.com/sj26", "following_url": "https://api.github.com/users/sj26/following{/other_user}", "received_events_url": "https://api.github.com/users/sj26/received_events", "organizations_url": "https://api.github.com/users/sj26/orgs", "avatar_url": "https://0.gravatar.com/avatar/93a69a78c59a3219aa5d26fd612fd667?d=https%3A%2F%2Fidenticons.github.com%2F097a266326991a991c77d203160c8563.png", "starred_url": "https://api.github.com/users/sj26/starred{/owner}{/repo}", "id": 14028, "followers_url": "https://api.github.com/users/sj26/followers", "type": "User"}, "created_at": "2012-11-01T01:48:15Z", "id": 9968503, "owner": "rails"}
