{"body": "Thanks for the pull request and pointing out the issue. Unfortunately, the fix requires more effort. First, we cannot replace setup by require as setup will not require the gems (only make Rubygems load them). I have made a better description of the  solution here:\r\n\r\nhttps://gist.github.com/1a59bad7b9dda1c6d4ec", "url": "https://api.github.com/repos/rails/rails/issues/comments/1992964", "created_at": "2011-09-04T17:58:47Z", "html_url": "https://github.com/rails/rails/pull/2790#issuecomment-1992964", "updated_at": "2011-09-04T17:58:47Z", "repo": "rails", "issue_id": 2790, "user": {"following_url": "https://api.github.com/users/josevalim/following{/other_user}", "events_url": "https://api.github.com/users/josevalim/events{/privacy}", "organizations_url": "https://api.github.com/users/josevalim/orgs", "url": "https://api.github.com/users/josevalim", "gists_url": "https://api.github.com/users/josevalim/gists{/gist_id}", "html_url": "https://github.com/josevalim", "subscriptions_url": "https://api.github.com/users/josevalim/subscriptions", "avatar_url": "https://2.gravatar.com/avatar/e837f6b7fd146ab16ed3d663476c063e?d=https%3A%2F%2Fidenticons.github.com%2Fe20b21ae6508f22fc189c60a0880d0b8.png", "repos_url": "https://api.github.com/users/josevalim/repos", "received_events_url": "https://api.github.com/users/josevalim/received_events", "gravatar_id": "e837f6b7fd146ab16ed3d663476c063e", "starred_url": "https://api.github.com/users/josevalim/starred{/owner}{/repo}", "login": "josevalim", "type": "User", "id": 9582, "followers_url": "https://api.github.com/users/josevalim/followers"}, "owner": "rails", "_id": {"$oid": "52383fc6bd3543c151010766"}, "id": 1992964, "issue_url": "https://api.github.com/repos/rails/rails/issues/2790"}
