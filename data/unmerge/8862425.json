{"body": "@carlosantoniodasilva I started with a simple query:\n```ruby\nArtikel.where(:artikelnr => \"301.04220\")\n```\nand got the following backtrace:\n```\n>>quote( String:\"301.04220\", nil)\n\nFrom: /home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-sqlserver-adapter-3.2.4/lib/active_record/connection_adapters/sqlserver/quoting.rb @ line 11 ActiveRecord::ConnectionAdapters::Sqlserver::Quoting#quote:\n\n     9:         def quote(value, column = nil)\n    10:           puts \">>quote( #{value.class}:#{value.inspect}, #{column.inspect})\"\n => 11:           binding.pry\n    12:           case value\n    13:             when String, ActiveSupport::Multibyte::Chars\n    14:               if column\n    15:                 case column.type\n    16:                   when :integer\n\n[1] pry(#<ActiveRecord::ConnectionAdapters::SQLServerAdapter>)> pry-backtrace\n\nBacktrace:\n--\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-sqlserver-adapter-3.2.4/lib/active_record/connection_adapters/sqlserver/quoting.rb:11:in `quote'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:416:in `quote'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:384:in `quoted'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:19:in `visit'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:341:in `visit_Arel_Nodes_Equality'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:19:in `visit'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:323:in `block in visit_Arel_Nodes_And'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:323:in `map'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:323:in `visit_Arel_Nodes_And'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:19:in `visit'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-sqlserver-adapter-3.2.4/lib/arel/visitors/sqlserver.rb:161:in `block in visit_Arel_Nodes_SelectStatem\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-sqlserver-adapter-3.2.4/lib/arel/visitors/sqlserver.rb:161:in `map'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-sqlserver-adapter-3.2.4/lib/arel/visitors/sqlserver.rb:161:in `visit_Arel_Nodes_SelectStatementWithOu\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-sqlserver-adapter-3.2.4/lib/arel/visitors/sqlserver.rb:99:in `visit_Arel_Nodes_SelectStatement'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:19:in `visit'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/visitor.rb:5:in `accept'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/arel-3.0.2/lib/arel/visitors/to_sql.rb:19:in `accept'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `to_sql'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:18:in `select_all'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/querying.rb:38:in `block in find_by_sql'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/explain.rb:40:in `logging_query_plan'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/querying.rb:37:in `find_by_sql'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/relation.rb:171:in `exec_queries'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/relation.rb:160:in `block in to_a'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/explain.rb:33:in `logging_query_plan'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/relation.rb:159:in `to_a'\n/home/klaus/.rvm/gems/ruby-1.9.3-p125@rails32/gems/activerecord-3.2.6/lib/active_record/relation.rb:498:in `inspect'\n```\n\nSo /arel/visitors/to_sql.rb:384:in `quoted':\n```ruby\n     def quoted o\n        quote(o, last_column)\n      end\n```\n\nSo 'quoted' calls 'quote' with 'last_column' but I can only find 'last_column' gets assigned in 'visit_Arel_Attributes_Attribute' which seemed to be used in Joins ?!\n", "url": "https://api.github.com/repos/rails/rails/issues/comments/8862425", "created_at": "2012-09-25T17:18:19Z", "html_url": "https://github.com/rails/rails/pull/6763#issuecomment-8862425", "updated_at": "2012-09-25T17:18:19Z", "repo": "rails", "issue_id": 6763, "user": {"following_url": "https://api.github.com/users/KDGundermann/following{/other_user}", "events_url": "https://api.github.com/users/KDGundermann/events{/privacy}", "organizations_url": "https://api.github.com/users/KDGundermann/orgs", "url": "https://api.github.com/users/KDGundermann", "gists_url": "https://api.github.com/users/KDGundermann/gists{/gist_id}", "html_url": "https://github.com/KDGundermann", "subscriptions_url": "https://api.github.com/users/KDGundermann/subscriptions", "avatar_url": "https://2.gravatar.com/avatar/00c2ec5c197b2de8e55997e594ba4c0a?d=https%3A%2F%2Fidenticons.github.com%2Fa05002e3153687d144e4e5c21f9efcd7.png", "repos_url": "https://api.github.com/users/KDGundermann/repos", "received_events_url": "https://api.github.com/users/KDGundermann/received_events", "gravatar_id": "00c2ec5c197b2de8e55997e594ba4c0a", "starred_url": "https://api.github.com/users/KDGundermann/starred{/owner}{/repo}", "login": "KDGundermann", "type": "User", "id": 208315, "followers_url": "https://api.github.com/users/KDGundermann/followers"}, "owner": "rails", "_id": {"$oid": "52380465bd3543c15100c5a9"}, "id": 8862425, "issue_url": "https://api.github.com/repos/rails/rails/issues/6763"}
