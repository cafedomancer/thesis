{"issue_url": "https://api.github.com/repos/rails/rails/issues/5023", "repo": "rails", "body": "Being able to specify an array of environments to `config.force_ssl` doesn't help. \r\n\r\nImagine the following scenario - you only want to force SSL for a specific controller/action but don't have SSL configured in your development environment. This currently works out-of-the-box - if we merge this request then you'd have to add the `unless Rails.env.development?` in every controller you use `force_ssl` (ignore for the moment that it's at class level and won't work if you're trying to restrict to an action). \r\n\r\nIf we take your suggestion of an array for `config.force_ssl` then it doesn't help as we don't want `Rack::SSL` configured in any environment so we need to specify an empty array. The `force_ssl` controller method can't use `config.force_ssl` to see if it should run as it's not what we want.\r\n\r\nIf you're suggesting adding `:env => []` to the `force_ssl` then there's no point as you'd still need to specify it everywhere and you can do it already using `:if` in a much cleaner way, e.g:\r\n\r\n``` ruby\r\nclass AccountsController < ApplicationController\r\n  force_ssl :if => :ssl_configured?\r\n  \r\n  def ssl_configured?\r\n    !Rails.env.development?\r\n  end\r\nend\r\n```\r\n\r\nMy concern is that the common case should work out of the box - maybe add a default implementation of the above that can be overridden.", "_id": {"$oid": "52381dbebd3543c15100e61e"}, "issue_id": 5023, "url": "https://api.github.com/repos/rails/rails/issues/comments/4134911", "html_url": "https://github.com/rails/rails/pull/5023#issuecomment-4134911", "updated_at": "2012-02-23T11:45:27Z", "user": {"subscriptions_url": "https://api.github.com/users/pixeltrix/subscriptions", "events_url": "https://api.github.com/users/pixeltrix/events{/privacy}", "repos_url": "https://api.github.com/users/pixeltrix/repos", "gists_url": "https://api.github.com/users/pixeltrix/gists{/gist_id}", "url": "https://api.github.com/users/pixeltrix", "login": "pixeltrix", "gravatar_id": "b14001f2b40640dd6cb63f0e8f1f4869", "html_url": "https://github.com/pixeltrix", "following_url": "https://api.github.com/users/pixeltrix/following{/other_user}", "received_events_url": "https://api.github.com/users/pixeltrix/received_events", "organizations_url": "https://api.github.com/users/pixeltrix/orgs", "avatar_url": "https://1.gravatar.com/avatar/b14001f2b40640dd6cb63f0e8f1f4869?d=https%3A%2F%2Fidenticons.github.com%2F7cb36e23529e4de4c41460940cc85e6e.png", "starred_url": "https://api.github.com/users/pixeltrix/starred{/owner}{/repo}", "id": 6321, "followers_url": "https://api.github.com/users/pixeltrix/followers", "type": "User"}, "created_at": "2012-02-23T11:45:27Z", "id": 4134911, "owner": "rails"}
