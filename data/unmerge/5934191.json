{"issue_url": "https://api.github.com/repos/rails/rails/issues/6488", "repo": "rails", "body": "I am suspicious of the reaper in general, personally, although @tenderlove may disagree.   \n\nBut I personally don't think the reaper does anything particularly useful atm, so making sure it does what it does properly for fairness... I dunno. \n\nThe reaper right now will reap only if a connection is still checked out, was last checked out more than `@dead_connection_checkout` seconds ago (default 5), *and* has been closed by the actual rdbms (I think that's what `active?` checks?)\n\nMost rdbms have a very long timeout for idleness, MySQL by default (with AR mysql2) will wait _hours_ before closing an idle connection. Which is in fact ordinarily what you want, I think?\n\nSo I'm not sure how the reaper does anything useful -- it won't reap a 'leaked' connection, under normal conditions, for many minutes or even hours after it was *leaked* (typo fixed). \n\nI may be missing something? Maybe you're expected to significantly reduce the rdbm's idle timeout to make use of the reaper? \n\nThere are of course times when a connection may be closed because of network or server problems or rdbms restart, unrelated to leaked connections. But the reaper's not meant to deal with that, i don't think, and probably isn't the right way to anyway. (There's already an automatic_reconnect key for some of AR's adapters, although it's semantics aren't entirely clear). \n\nAnyhow, this is really a different ticket, I just mention it before you dive into making things 'right' with the reaper, and because you seem to understand this stuff well and I hadn't gotten anyone else to consider or confirm or deny my suspicions about current reaper func yet. :)", "_id": {"$oid": "52380786bd3543c15100cae0"}, "issue_id": 6488, "url": "https://api.github.com/repos/rails/rails/issues/comments/5934191", "html_url": "https://github.com/rails/rails/pull/6488#issuecomment-5934191", "updated_at": "2012-05-25T16:10:38Z", "user": {"subscriptions_url": "https://api.github.com/users/jrochkind/subscriptions", "events_url": "https://api.github.com/users/jrochkind/events{/privacy}", "repos_url": "https://api.github.com/users/jrochkind/repos", "gists_url": "https://api.github.com/users/jrochkind/gists{/gist_id}", "url": "https://api.github.com/users/jrochkind", "login": "jrochkind", "gravatar_id": "6a13e655e637138f8d571cec3f9cea76", "html_url": "https://github.com/jrochkind", "following_url": "https://api.github.com/users/jrochkind/following{/other_user}", "received_events_url": "https://api.github.com/users/jrochkind/received_events", "organizations_url": "https://api.github.com/users/jrochkind/orgs", "avatar_url": "https://0.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?d=https%3A%2F%2Fidenticons.github.com%2Fd54ea80e1dddb765bab019d4dfe36c23.png", "starred_url": "https://api.github.com/users/jrochkind/starred{/owner}{/repo}", "id": 149304, "followers_url": "https://api.github.com/users/jrochkind/followers", "type": "User"}, "created_at": "2012-05-25T16:09:47Z", "id": 5934191, "owner": "rails"}
