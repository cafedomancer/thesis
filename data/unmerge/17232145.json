{"body": "@rafaelfranca \r\n\r\n`first_or_create`, `first_or_create!` and `first_or_initialize` all have the same problem. They do not create association record for hm:t .\r\n\r\nThis PR fixes the issue for the first two.\r\n\r\nIn order to fix `first_or_initialize` I invoked `build` on proxy instead of base object but found that\r\n\r\n```\r\nphysician.patients.build(name: 'neeraj').save!\r\n````\r\n\r\ndoes not create the association record.\r\n\r\nI could not find any documentation stating that `build` does not support hm:t .\r\n\r\nIn short this PR does not fix `first_or_initialize` . For that I am going to open another issue and will look into that. If that issue is fixed then it should be easy to fix  `first_or_initialize` .", "url": "https://api.github.com/repos/rails/rails/issues/comments/17232145", "created_at": "2013-04-30T14:55:07Z", "html_url": "https://github.com/rails/rails/pull/10367#issuecomment-17232145", "updated_at": "2013-04-30T14:55:07Z", "repo": "rails", "issue_id": 10367, "user": {"following_url": "https://api.github.com/users/neerajdotname/following{/other_user}", "events_url": "https://api.github.com/users/neerajdotname/events{/privacy}", "organizations_url": "https://api.github.com/users/neerajdotname/orgs", "url": "https://api.github.com/users/neerajdotname", "gists_url": "https://api.github.com/users/neerajdotname/gists{/gist_id}", "html_url": "https://github.com/neerajdotname", "subscriptions_url": "https://api.github.com/users/neerajdotname/subscriptions", "avatar_url": "https://0.gravatar.com/avatar/934f858e451cf9b771996b2940cd696b?d=https%3A%2F%2Fidenticons.github.com%2F985e9a46e10005356bbaf194249f6856.png", "repos_url": "https://api.github.com/users/neerajdotname/repos", "received_events_url": "https://api.github.com/users/neerajdotname/received_events", "gravatar_id": "934f858e451cf9b771996b2940cd696b", "starred_url": "https://api.github.com/users/neerajdotname/starred{/owner}{/repo}", "login": "neerajdotname", "type": "User", "id": 6399, "followers_url": "https://api.github.com/users/neerajdotname/followers"}, "owner": "rails", "_id": {"$oid": "523cd73dbd354364b9003042"}, "id": 17232145, "issue_url": "https://api.github.com/repos/rails/rails/issues/10367"}
