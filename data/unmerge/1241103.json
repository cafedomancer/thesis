{"updated_at": "2011-05-26T09:06:27Z", "repo": "rails", "created_at": "2011-05-26T09:06:27Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/1241103", "id": 1241103, "issue_url": "https://api.github.com/repos/rails/rails/issues/1320", "issue_id": 1320, "user": {"repos_url": "https://api.github.com/users/bogdan/repos", "type": "User", "html_url": "https://github.com/bogdan", "starred_url": "https://api.github.com/users/bogdan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bogdan/subscriptions", "following_url": "https://api.github.com/users/bogdan/following{/other_user}", "gravatar_id": "91913f6ab8085bab0f2aa43995ba8ca2", "organizations_url": "https://api.github.com/users/bogdan/orgs", "url": "https://api.github.com/users/bogdan", "gists_url": "https://api.github.com/users/bogdan/gists{/gist_id}", "avatar_url": "https://1.gravatar.com/avatar/91913f6ab8085bab0f2aa43995ba8ca2?d=https%3A%2F%2Fidenticons.github.com%2F926d19e70f74c20f796d376aafa3c6e2.png", "id": 122436, "events_url": "https://api.github.com/users/bogdan/events{/privacy}", "login": "bogdan", "received_events_url": "https://api.github.com/users/bogdan/received_events", "followers_url": "https://api.github.com/users/bogdan/followers"}, "body": "I gave some thought to Jose's idea. The problem is that Sanitizer is an internal class. Moreover it's going very deep into implementation. This make it hard to pass own sanitizer instance and even own sanitizer class to `#sanitize_from_mass_assignment` method without significant changes to the current implementation.\r\n\r\nThe only thing I can propose connected with callback is something like this:\r\n\r\n```\r\nActiveModel::MassAssignmentSecurity::Sanitizer.on_error = lambda {|attrs|\r\n  raise StandardError\r\n}\r\n```\r\n\r\nAnd implementation like this:\r\n\r\n```\r\n      def process_removed_keys(attrs)\r\n        if callback = self.class.on_error\r\n          callback.call(attrs)\r\n        else\r\n          self.logger.debug \"WARNING: Can't mass-assign protected attributes: #{attrs.join(', ')}\" if self.logger\r\n        end\r\n      end\r\n```\r\n\r\nBut this is still a configuration option.\r\n\r\n\r\nWhat do you think?\r\n", "_id": {"$oid": "52385997bd3543c151011d1e"}, "html_url": "https://github.com/rails/rails/pull/1320#issuecomment-1241103"}
