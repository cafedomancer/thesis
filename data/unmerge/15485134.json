{"updated_at": "2013-03-26T20:07:07Z", "repo": "rails", "created_at": "2013-03-26T20:07:07Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/15485134", "id": 15485134, "issue_url": "https://api.github.com/repos/rails/rails/issues/2303", "issue_id": 2303, "user": {"repos_url": "https://api.github.com/users/Ferroman/repos", "type": "User", "html_url": "https://github.com/Ferroman", "starred_url": "https://api.github.com/users/Ferroman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ferroman/subscriptions", "following_url": "https://api.github.com/users/Ferroman/following{/other_user}", "gravatar_id": "096968a285ac70270237bc78e0bb57cb", "organizations_url": "https://api.github.com/users/Ferroman/orgs", "url": "https://api.github.com/users/Ferroman", "gists_url": "https://api.github.com/users/Ferroman/gists{/gist_id}", "avatar_url": "https://1.gravatar.com/avatar/096968a285ac70270237bc78e0bb57cb?d=https%3A%2F%2Fidenticons.github.com%2Fa6b0c156fc3574892f7e6664fa67f91c.png", "id": 221830, "events_url": "https://api.github.com/users/Ferroman/events{/privacy}", "login": "Ferroman", "received_events_url": "https://api.github.com/users/Ferroman/received_events", "followers_url": "https://api.github.com/users/Ferroman/followers"}, "body": "I have the same issue in 3.2.12.\r\n\r\n``` Dish.select(\"dishes.*, ordered_dishes.id as dish_ordered\").\r\n        includes(:ordered_dishes, :ordered_dishes => :user_menu).\r\n        where(\"dishes.menu_section_id in (?) AND (user_menus.user_id = ? OR user_menus.user_id IS NULL)\", menu_section_ids, user_id).```\r\n\r\nResult:\r\n\r\n```SELECT \"dishes\".\"id\" AS t0_r0, \"dishes\".\"title\" AS t0_r1, \"dishes\".\"created_at\" AS t0_r2, \"dishes\".\"updated_at\" AS t0_r3, \"dishes\".\"menu_section_id\" AS t0_r4, \"ordered_dishes\".\"id\" AS t1_r0, \"ordered_dishes\".\"user_menu_id\" AS t1_r1, \"ordered_dishes\".\"dish_id\" AS t1_r2, \"ordered_dishes\".\"created_at\" AS t1_r3, \"ordered_dishes\".\"updated_at\" AS t1_r4, \"user_menus\".\"id\" AS t2_r0, \"user_menus\".\"weekly_menu_id\" AS t2_r1, \"user_menus\".\"user_id\" AS t2_r2, \"user_menus\".\"created_at\" AS t2_r3, \"user_menus\".\"updated_at\" AS t2_r4, \"user_menus\".\"ordered\" AS t2_r5 FROM \"dishes\" \r\nLEFT OUTER JOIN \"ordered_dishes\" ON \"ordered_dishes\".\"dish_id\" = \"dishes\".\"id\"\r\nLEFT OUTER JOIN \"user_menus\" ON \"user_menus\".\"id\" = \"ordered_dishes\".\"user_menu_id\" WHERE (dishes.menu_section_id in (16,16,16) AND (user_menus.user_id = 2 OR user_menus.user_id IS NULL))```", "_id": {"$oid": "52384506bd3543c151010db5"}, "html_url": "https://github.com/rails/rails/pull/2303#issuecomment-15485134"}
