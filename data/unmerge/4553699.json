{"issue_url": "https://api.github.com/repos/rails/rails/issues/5476", "repo": "rails", "body": "I didn't mean to close - hit the wrong button.\r\n\r\nI don't agree about the semantics. Shouldn't an association with the target loaded from a previous call like this\r\n\r\n```ruby\r\n    owner.associaton.to_a\r\n    owner.attributes = hash_with_nested_attributes\r\n```\r\n\r\ncall the callbacks the same number of times as just the nested attribute assignment:\r\n\r\n```ruby\r\n    # target empty here\r\n    owner.attributes = hash_with_nested_attributes\r\n```\r\n\r\nIn the current implementation the callback is called in the second version but not in the first. And by the way, in the application it may not be obvious which of the two situations apply. Since the loading can happen at some completely different place. This action at a distance has made my job in hunting this down a lot more difficult.\r\n\r\nIf we keep the current behavior, the implementation of the callback needs to check if the record is already in the association or if it is a really new record - which is short of yet another database lookup not quite so straightforward.\r\n\r\n", "_id": {"$oid": "523ec1f2bd354364b9012710"}, "issue_id": 5476, "url": "https://api.github.com/repos/rails/rails/issues/comments/4553699", "html_url": "https://github.com/rails/rails/pull/5476#issuecomment-4553699", "updated_at": "2012-03-17T12:29:53Z", "user": {"subscriptions_url": "https://api.github.com/users/tandem-softworks/subscriptions", "events_url": "https://api.github.com/users/tandem-softworks/events{/privacy}", "repos_url": "https://api.github.com/users/tandem-softworks/repos", "gists_url": "https://api.github.com/users/tandem-softworks/gists{/gist_id}", "url": "https://api.github.com/users/tandem-softworks", "login": "tandem-softworks", "gravatar_id": "34a16f98f4ba99dcb241c8ddb3a5446c", "html_url": "https://github.com/tandem-softworks", "following_url": "https://api.github.com/users/tandem-softworks/following{/other_user}", "received_events_url": "https://api.github.com/users/tandem-softworks/received_events", "organizations_url": "https://api.github.com/users/tandem-softworks/orgs", "avatar_url": "https://2.gravatar.com/avatar/34a16f98f4ba99dcb241c8ddb3a5446c?d=https%3A%2F%2Fidenticons.github.com%2F1da9a1d31a36bd743246c9900650b600.png", "starred_url": "https://api.github.com/users/tandem-softworks/starred{/owner}{/repo}", "id": 1497057, "followers_url": "https://api.github.com/users/tandem-softworks/followers", "type": "User"}, "created_at": "2012-03-17T12:29:53Z", "id": 4553699, "owner": "rails"}
