{"updated_at": "2013-07-10T01:44:12Z", "repo": "rails", "created_at": "2013-07-10T01:44:12Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/20717030", "id": 20717030, "issue_url": "https://api.github.com/repos/rails/rails/issues/11168", "issue_id": 11168, "user": {"repos_url": "https://api.github.com/users/NZKoz/repos", "type": "User", "html_url": "https://github.com/NZKoz", "starred_url": "https://api.github.com/users/NZKoz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NZKoz/subscriptions", "following_url": "https://api.github.com/users/NZKoz/following{/other_user}", "gravatar_id": "efa76b164a7de4a5730e4fa397cc4425", "organizations_url": "https://api.github.com/users/NZKoz/orgs", "url": "https://api.github.com/users/NZKoz", "gists_url": "https://api.github.com/users/NZKoz/gists{/gist_id}", "avatar_url": "https://2.gravatar.com/avatar/efa76b164a7de4a5730e4fa397cc4425?d=https%3A%2F%2Fidenticons.github.com%2F85d8ce590ad8981ca2c8286f79f59954.png", "id": 197, "events_url": "https://api.github.com/users/NZKoz/events{/privacy}", "login": "NZKoz", "received_events_url": "https://api.github.com/users/NZKoz/received_events", "followers_url": "https://api.github.com/users/NZKoz/followers"}, "body": "@ptoomey3 yes, you'd have to deserialize to check expiry, this is a small performance cost but not one of any consequence really.  In the normal case it has to be deserialized anyway, and in the 'expired' case you're still forced to do the HMAC checks, I don't see a huge issue here.\r\n\r\nAs for your second point, you can't actually serialize hashes in cookies at present because of [this code](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/cookies.rb#L284-L290)\r\n\r\n```ruby\r\n      def []=(name, options)\r\n        if options.is_a?(Hash)\r\n          options.symbolize_keys!\r\n          value = options[:value]\r\n        else\r\n          value = options\r\n          options = { :value => value }\r\n        end\r\n\r\n        handle_options(options)\r\n\r\n        if @cookies[name.to_s] != value or options[:expires]\r\n          @cookies[name.to_s] = value\r\n          @set_cookies[name.to_s] = options\r\n          @delete_cookies.delete(name.to_s)\r\n        end\r\n\r\n        value\r\n      end\r\n```\r\n\r\nSo it's something we should write in the release notes, but we're not breaking anyone's apps by doing this unless they're doing some EGREGIOUS hax to avoid that check", "_id": {"$oid": "5237d81cbd3543c15100844a"}, "html_url": "https://github.com/rails/rails/pull/11168#issuecomment-20717030"}
