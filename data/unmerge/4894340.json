{"updated_at": "2012-04-03T04:34:33Z", "repo": "rails", "created_at": "2012-04-03T04:34:33Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/4894340", "id": 4894340, "issue_url": "https://api.github.com/repos/rails/rails/issues/5696", "issue_id": 5696, "user": {"repos_url": "https://api.github.com/users/NZKoz/repos", "type": "User", "html_url": "https://github.com/NZKoz", "starred_url": "https://api.github.com/users/NZKoz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NZKoz/subscriptions", "following_url": "https://api.github.com/users/NZKoz/following{/other_user}", "gravatar_id": "efa76b164a7de4a5730e4fa397cc4425", "organizations_url": "https://api.github.com/users/NZKoz/orgs", "url": "https://api.github.com/users/NZKoz", "gists_url": "https://api.github.com/users/NZKoz/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/efa76b164a7de4a5730e4fa397cc4425?d=https%3A%2F%2Fidenticons.github.com%2F85d8ce590ad8981ca2c8286f79f59954.png", "id": 197, "events_url": "https://api.github.com/users/NZKoz/events{/privacy}", "login": "NZKoz", "received_events_url": "https://api.github.com/users/NZKoz/received_events", "followers_url": "https://api.github.com/users/NZKoz/followers"}, "body": "So your code still needs to iterate to find the batching points for the iteration, you can still iterate, get the list of ids you're splitting on then doing something like this in each of the workers:\r\n\r\n```ruby\r\n  where(id: this_id..(next_id-1)).find_in_batches\r\n```\r\n\r\nmuddying up the API with something like :max_records for such an edge case doesn't seem worth it to me, find_in_batches lets you iterate over a result set without having a crazy amount of memory allocated.  Everything else should be done in the code which generates the result sets.", "_id": {"$oid": "523eab4bbd354364b9011d0e"}, "html_url": "https://github.com/rails/rails/pull/5696#issuecomment-4894340"}
