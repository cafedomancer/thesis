{"body": "What is the status of this issue?\n\nThis problem is making it impossible for us to change the type of a STI record.\n\n```\n[28] pry(main)> rps = RetailerPayoutStrategy.first\n  RetailerPayoutStrategy Load (0.4ms)  SELECT `retailer_payout_strategies`.* FROM `retailer_payout_strategies` LIMIT 1\n=> #<PrepayRetailerPayoutStrategy id: 1, deal_id: 102, type: \"PrepayRetailerPayoutStrategy\", payout_delay_in_days: nil, upfront_percent: 4, payout_from: nil, created_at: \"2012-07-31 09:56:37\", updated_at: \"2012-07-31 11:18:01\">\n[30] pry(main)> rps.becomes(DefaultRetailerPayoutStrategy).save!\n   (0.2ms)  BEGIN\n   (0.3ms)  UPDATE `retailer_payout_strategies` SET `type` = 'DefaultRetailerPayoutStrategy', `updated_at` = '2012-07-31 11:37:08' WHERE `retailer_payout_strategies`.`type` IN ('DefaultRetailerPayoutStrategy') AND `retailer_payout_strategies`.`id` = 1\n   (0.1ms)  COMMIT\n=> true\n```\n\nSince ```becomes``` changes the type-value in memory to the new type, the database update fails silently because of the ```WHERE `retailer_payout_strategies`.`type` IN ('DefaultRetailerPayoutStrategy')``` part.", "url": "https://api.github.com/repos/rails/rails/issues/comments/7395821", "created_at": "2012-07-31T11:38:28Z", "html_url": "https://github.com/rails/rails/pull/3023#issuecomment-7395821", "updated_at": "2012-07-31T11:38:28Z", "repo": "rails", "issue_id": 3023, "user": {"following_url": "https://api.github.com/users/dipth/following{/other_user}", "events_url": "https://api.github.com/users/dipth/events{/privacy}", "organizations_url": "https://api.github.com/users/dipth/orgs", "url": "https://api.github.com/users/dipth", "gists_url": "https://api.github.com/users/dipth/gists{/gist_id}", "html_url": "https://github.com/dipth", "subscriptions_url": "https://api.github.com/users/dipth/subscriptions", "avatar_url": "https://0.gravatar.com/avatar/ca11ae08feb22522f7651533ec8d311c?d=https%3A%2F%2Fidenticons.github.com%2F9efa4cfba721ce5957092f03a92255f4.png", "repos_url": "https://api.github.com/users/dipth/repos", "received_events_url": "https://api.github.com/users/dipth/received_events", "gravatar_id": "ca11ae08feb22522f7651533ec8d311c", "starred_url": "https://api.github.com/users/dipth/starred{/owner}{/repo}", "login": "dipth", "type": "User", "id": 171490, "followers_url": "https://api.github.com/users/dipth/followers"}, "owner": "rails", "_id": {"$oid": "523f90c1bd354364b9018dac"}, "id": 7395821, "issue_url": "https://api.github.com/repos/rails/rails/issues/3023"}
