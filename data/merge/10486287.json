{"updated_at": "2012-11-18T13:58:01Z", "repo": "rails", "created_at": "2012-11-18T13:50:30Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/10486287", "id": 10486287, "issue_url": "https://api.github.com/repos/rails/rails/issues/7980", "issue_id": 7980, "user": {"repos_url": "https://api.github.com/users/gingerlime/repos", "type": "User", "html_url": "https://github.com/gingerlime", "starred_url": "https://api.github.com/users/gingerlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gingerlime/subscriptions", "following_url": "https://api.github.com/users/gingerlime/following{/other_user}", "gravatar_id": "00afd84dac05c525b368b3f9beafc8fb", "organizations_url": "https://api.github.com/users/gingerlime/orgs", "url": "https://api.github.com/users/gingerlime", "gists_url": "https://api.github.com/users/gingerlime/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/00afd84dac05c525b368b3f9beafc8fb?d=https%3A%2F%2Fidenticons.github.com%2F4ac1fa9b1685190560b880b9ee5993bb.png", "id": 524274, "events_url": "https://api.github.com/users/gingerlime/events{/privacy}", "login": "gingerlime", "received_events_url": "https://api.github.com/users/gingerlime/received_events", "followers_url": "https://api.github.com/users/gingerlime/followers"}, "body": "Hope I can butt-in on this. I've tried to look at this closely, and I believe actually both @indirect and @gazay are correct :)\r\n\r\nHowever, @indirect's approach is probably safer. i.e. whilst the leftmost IP *can* be the correct IP for the client, it can also easily be spoofed this way. \r\n\r\nI think I also identified an existing potential vulnerability in both master and stable, particularly to rails apps with no proxy (most prominent example is nginx/passenger probably).\r\n\r\nI've written a (rather lengthy) [blog post](http://blog.gingerlime.com/2012/rails-ip-spoofing-vulnerabilities-and-protection/) about this, which I hope explains things clearly... including how both can be correct.\r\n\r\nGiven that my ruby/rails experience is somewhat limited, I want to be careful with broad statements, but would be great if you guys can take a look, and I'm happy to discuss / explain / discover I'm completely wrong.", "_id": {"$oid": "523db5b8bd354364b90095dd"}, "html_url": "https://github.com/rails/rails/pull/7980#issuecomment-10486287"}
