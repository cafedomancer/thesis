{"updated_at": "2012-09-24T22:29:58Z", "repo": "rails", "created_at": "2012-09-24T22:29:58Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/8837433", "id": 8837433, "issue_url": "https://api.github.com/repos/rails/rails/issues/6450", "issue_id": 6450, "user": {"repos_url": "https://api.github.com/users/schneems/repos", "type": "User", "html_url": "https://github.com/schneems", "starred_url": "https://api.github.com/users/schneems/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schneems/subscriptions", "following_url": "https://api.github.com/users/schneems/following{/other_user}", "gravatar_id": "db953d125f5cc49756edb6149f1b813e", "organizations_url": "https://api.github.com/users/schneems/orgs", "url": "https://api.github.com/users/schneems", "gists_url": "https://api.github.com/users/schneems/gists{/gist_id}", "avatar_url": "https://1.gravatar.com/avatar/db953d125f5cc49756edb6149f1b813e?d=https%3A%2F%2Fidenticons.github.com%2F6ef42a6eab211ddd71ac423a80b42d15.png", "id": 59744, "events_url": "https://api.github.com/users/schneems/events{/privacy}", "login": "schneems", "received_events_url": "https://api.github.com/users/schneems/received_events", "followers_url": "https://api.github.com/users/schneems/followers"}, "body": "Thanks for working on this, I poked around in the code and would like to see a slightly more abstracted solution. I took the liberty of playing with your solution and something like this would be more maintainable into the future: \n\n```ruby\nmodule Rails\n  module Generators\n    class ResourceRouteGenerator < NamedBase\n\n      def route_string\n        @route_string ||= \"\"\n      end\n\n      def write(str = '', indent = 0)\n        route_string << \"#{\"  \" * indent}#{str}\\n\"\n      end\n\n      def route_length\n        regular_class_path.length\n      end\n\n\n      # Properly nests namespaces passed into a generator\n      #\n      #   $ rails generate resource admin/users/products\n      #\n      # should give you\n      #\n      #   namespace :admin do\n      #     namespace :users\n      #       resources :products\n      #     end\n      #   end\n      def add_resource_route\n        return if options[:actions].present?\n\n        # iterates over all namespaces and opens up blocks\n        regular_class_path.each_with_index do |namespace, index|\n          write(\"namespace :#{namespace} do\", index + 1)\n        end\n\n        # inserts the primary resource\n        write(\"resources :#{file_name.pluralize}\", route_length + 2)\n\n        # ends blocks\n        regular_class_path.each_index do |index|\n          write(\"end\", route_length - index)\n        end\n\n        # route prepends two spaces onto the front of the string that is passed, this corrects that\n        route route_string[2..-1]\n      end\n    end\n  end\nend\n```\n\nYou'll want to verify the whitespace calculations on this still work out and maybe modify your tests. When you're done you'll need to squash to one commit. I can help you out with any of that if you have questions/problems. If you're not interested in working on this anymore let me know and i'll put this in a new PR. Either way, thanks and let me know if you have questions.", "_id": {"$oid": "523e581abd354364b900f418"}, "html_url": "https://github.com/rails/rails/pull/6450#issuecomment-8837433"}
