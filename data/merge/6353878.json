{"issue_url": "https://api.github.com/repos/rails/rails/issues/6743", "repo": "rails", "body": "There is a problem with a `to_arel` or `to_sql` duck typing method. This is when the object wraps multiple fields.\n\n``` ruby\nclass Fare\n  def price\n    Money.new(price_value, price_unit)\n  end\nend\n```\n\nNow what would need to happen if we wanted to call:\n\n``` ruby\nFare.where(price: Money.new(4, \"USD\"))\n```\n\nSomehow, the key would need to change too. It would need to be converted to:\n\n``` ruby\nFare.where(price_value: 4, price_unit: \"USD\")\n```\n\nThis complexity is a good argument for the solution @jonleighton suggested a couple of comments back. Just create the finder yourself. Another pro of that solution is that the database logic remains inside the AR class.\n\nIf you do decide to implement this, then you could also do this for existing objects, like relations.\n\nNow you would have to do:\n\n``` ruby\nEmployee.where(manager_id: Manager.find(params[:manager_id]))\n```\n\nBut when you allow changing the key as well, you could write:\n\n``` ruby\nEmployee.where(manager: Manager.find(params[:manager_id]))\n```\n\nStill, this sounds complex and magical to me.", "_id": {"$oid": "523e2d0bbd354364b900e14b"}, "issue_id": 6743, "url": "https://api.github.com/repos/rails/rails/issues/comments/6353878", "html_url": "https://github.com/rails/rails/pull/6743#issuecomment-6353878", "updated_at": "2012-06-15T10:46:31Z", "user": {"subscriptions_url": "https://api.github.com/users/iain/subscriptions", "events_url": "https://api.github.com/users/iain/events{/privacy}", "repos_url": "https://api.github.com/users/iain/repos", "gists_url": "https://api.github.com/users/iain/gists{/gist_id}", "url": "https://api.github.com/users/iain", "login": "iain", "gravatar_id": "42ec9fd08c179b547dcb60d977e29941", "html_url": "https://github.com/iain", "following_url": "https://api.github.com/users/iain/following{/other_user}", "received_events_url": "https://api.github.com/users/iain/received_events", "organizations_url": "https://api.github.com/users/iain/orgs", "avatar_url": "https://1.gravatar.com/avatar/42ec9fd08c179b547dcb60d977e29941?d=https%3A%2F%2Fidenticons.github.com%2Fd8a3b2dde3181c8257e2e45efbd1e8ae.png", "starred_url": "https://api.github.com/users/iain/starred{/owner}{/repo}", "id": 12692, "followers_url": "https://api.github.com/users/iain/followers", "type": "User"}, "created_at": "2012-06-15T10:46:31Z", "id": 6353878, "owner": "rails"}
