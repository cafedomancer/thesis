{"body": "Thanks @spastorino!\r\n\r\nWe had a chat and did a benchmark showing no significant performance impact for using encrypted session cookies versus signed. So, the recommendation is to reduce the number of configuration options for users and to choose the best cookie store we can, given their app's config.\r\n\r\nHere's the benchmark:\r\n\r\n```ruby\r\nrequire 'benchmark'\r\n\r\nrequire 'active_support/key_generator'\r\nrequire 'active_support/message_verifier'\r\nrequire 'active_support/message_encryptor'\r\n\r\nBenchmark.bm do |r|\r\n  N = 100000\r\n\r\n  r.report(\"signed\") do\r\n    key_generator = ActiveSupport::DummyKeyGenerator.new('b3c631c314c0bbca50c1b2843150fe33')\r\n    secret = key_generator.generate_key('signed cookie salt')\r\n    verifier = ActiveSupport::MessageVerifier.new(secret)\r\n    signed_message = verifier.generate('test')\r\n\r\n    N.times { verifier.verify(signed_message) }\r\n  end\r\n\r\n  r.report(\"encrypted\") do\r\n    key_generator = ActiveSupport::KeyGenerator.new('b3c631c314c0bbca50c1b2843150fe33')\r\n    secret = key_generator.generate_key('encrypted cookie salt')\r\n    sign_secret = key_generator.generate_key('encrypted cookie salt')\r\n    encryptor = ActiveSupport::MessageEncryptor.new(secret, sign_secret)\r\n    encrypted_message = encryptor.encrypt_and_sign('test')\r\n\r\n    N.times { encryptor.decrypt_and_verify(encrypted_message) }\r\n  end\r\nend\r\n\r\n#             user       system     total    real\r\n# signed      3.240000   0.010000   3.250000 (  3.263722)\r\n# encrypted   5.450000   0.010000   5.460000 (  5.472302)\r\n```", "url": "https://api.github.com/repos/rails/rails/issues/comments/15719357", "created_at": "2013-04-01T15:14:29Z", "html_url": "https://github.com/rails/rails/pull/9978#issuecomment-15719357", "updated_at": "2013-04-01T15:14:29Z", "repo": "rails", "issue_id": 9978, "user": {"following_url": "https://api.github.com/users/trevorturk/following{/other_user}", "events_url": "https://api.github.com/users/trevorturk/events{/privacy}", "organizations_url": "https://api.github.com/users/trevorturk/orgs", "url": "https://api.github.com/users/trevorturk", "gists_url": "https://api.github.com/users/trevorturk/gists{/gist_id}", "html_url": "https://github.com/trevorturk", "subscriptions_url": "https://api.github.com/users/trevorturk/subscriptions", "avatar_url": "https://1.gravatar.com/avatar/c0b6fb3807d7d4f255463ed168c75897?d=https%3A%2F%2Fidenticons.github.com%2F69cb3ea317a32c4e6143e665fdb20b14.png", "repos_url": "https://api.github.com/users/trevorturk/repos", "received_events_url": "https://api.github.com/users/trevorturk/received_events", "gravatar_id": "c0b6fb3807d7d4f255463ed168c75897", "starred_url": "https://api.github.com/users/trevorturk/starred{/owner}{/repo}", "login": "trevorturk", "type": "User", "id": 402, "followers_url": "https://api.github.com/users/trevorturk/followers"}, "owner": "rails", "_id": {"$oid": "523cffcabd354364b9003cec"}, "id": 15719357, "issue_url": "https://api.github.com/repos/rails/rails/issues/9978"}
