{"updated_at": "2013-04-26T07:58:12Z", "repo": "rails", "created_at": "2013-04-26T07:58:12Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/17060011", "id": 17060011, "issue_url": "https://api.github.com/repos/rails/rails/issues/10337", "issue_id": 10337, "user": {"repos_url": "https://api.github.com/users/eimermusic/repos", "type": "User", "html_url": "https://github.com/eimermusic", "starred_url": "https://api.github.com/users/eimermusic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eimermusic/subscriptions", "following_url": "https://api.github.com/users/eimermusic/following{/other_user}", "gravatar_id": "ff11a7645980887fe1409cd37cb8be9c", "organizations_url": "https://api.github.com/users/eimermusic/orgs", "url": "https://api.github.com/users/eimermusic", "gists_url": "https://api.github.com/users/eimermusic/gists{/gist_id}", "avatar_url": "https://2.gravatar.com/avatar/ff11a7645980887fe1409cd37cb8be9c?d=https%3A%2F%2Fidenticons.github.com%2F081b9d0fe5c806746fd4324e33081218.png", "id": 66180, "events_url": "https://api.github.com/users/eimermusic/events{/privacy}", "login": "eimermusic", "received_events_url": "https://api.github.com/users/eimermusic/received_events", "followers_url": "https://api.github.com/users/eimermusic/followers"}, "body": "Sorry about that.\r\nStarted looking at the failing tests. And done the rabbit hole I went, where things got a whole lot more complicated.\r\n\r\nIn Rails:master the lookup of template formats does work... but only because Digestor is passing the format in the \"wrong\" argument. Digestor passes an options hash in the keys array argument of LookupContext. This is passed on down the line to PatSet and on to a Resolver. \r\n\r\nDigestor -> LookupContext -> PathSet ->...-> Resolver\r\n\r\nIn PathSet and Resolver there are several methods that just pass all this along as *args finally ending up in a find_all() where the signature does not match that in LookupContext. Down here the argument position that was \"keys\" is supposed to be a hash (details) which is supposed to contain a formats key.\r\n\r\nI am very unsure why it fails after my change. I see the same params being forwarded down to the resolver either way but still the Template comes back without any source contents.\r\n\r\nI'll dive back in few hours but if someone closer to this code has any hints that wouldn't be bad :)", "_id": {"$oid": "5237dfc4bd3543c151008d24"}, "html_url": "https://github.com/rails/rails/pull/10337#issuecomment-17060011"}
