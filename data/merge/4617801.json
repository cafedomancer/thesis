{"issue_url": "https://api.github.com/repos/rails/rails/issues/3946", "repo": "rails", "body": "@josevalim - In recent versions of Rails, we were able to set `config.assets.initialize_on_precompile = true` without the production database configured, and `assets:precompile` didn't complain as long as we didn't autoload any models. \r\n\r\nHowever, that seems to have changed in `3.2` - when `Application.initialize!` is called, it crashes instantly with the following backtrace:\r\n\r\n```\r\nrake aborted!\r\nFATAL:  database \"fat_free_crm_production\" does not exist\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `initialize'\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `new'\r\n... etc.\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `new_cshould I work on onnection'\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:287:in `checkout_new_connection'\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:308:in `clear_cache!'\r\n... etc.\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'\r\n/home/ndbroadbent/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'\r\n/home/ndbroadbent/code/rails/fat_free_crm/config/environment.rb:5:in `<top (required)>'\r\n...\r\n```\r\n\r\nWhat would you advise for my situation? Is it logical for Rails to support loading the environment without a database, or could Sprockets also handle the `RAILS_RELATIVE_URL_ROOT` env variable?", "_id": {"$oid": "52382f63bd3543c15100f533"}, "issue_id": 3946, "url": "https://api.github.com/repos/rails/rails/issues/comments/4617801", "html_url": "https://github.com/rails/rails/pull/3946#issuecomment-4617801", "updated_at": "2012-03-21T14:03:06Z", "user": {"subscriptions_url": "https://api.github.com/users/ndbroadbent/subscriptions", "events_url": "https://api.github.com/users/ndbroadbent/events{/privacy}", "repos_url": "https://api.github.com/users/ndbroadbent/repos", "gists_url": "https://api.github.com/users/ndbroadbent/gists{/gist_id}", "url": "https://api.github.com/users/ndbroadbent", "login": "ndbroadbent", "gravatar_id": "4931eceec58528529fd004e56af197c4", "html_url": "https://github.com/ndbroadbent", "following_url": "https://api.github.com/users/ndbroadbent/following{/other_user}", "received_events_url": "https://api.github.com/users/ndbroadbent/received_events", "organizations_url": "https://api.github.com/users/ndbroadbent/orgs", "avatar_url": "https://0.gravatar.com/avatar/4931eceec58528529fd004e56af197c4?d=https%3A%2F%2Fidenticons.github.com%2F6c444601992735a1c059ce1fdf1d4587.png", "starred_url": "https://api.github.com/users/ndbroadbent/starred{/owner}{/repo}", "id": 139536, "followers_url": "https://api.github.com/users/ndbroadbent/followers", "type": "User"}, "created_at": "2012-03-21T14:03:06Z", "id": 4617801, "owner": "rails"}
