{"body": "@willbryant since this is a problem with middleware I think that more reliable place to test this is in railties, which test entire rails stack, I've pushed a test that was failing without your patch and fixed after applying it. Basically it sets the flash and tries to make another request without fetching it, which should not trigger setting cookie session.", "url": "https://api.github.com/repos/rails/rails/issues/comments/5412723", "created_at": "2012-04-30T07:02:31Z", "html_url": "https://github.com/rails/rails/pull/6034#issuecomment-5412723", "updated_at": "2012-04-30T07:02:31Z", "repo": "rails", "issue_id": 6034, "user": {"following_url": "https://api.github.com/users/drogus/following{/other_user}", "events_url": "https://api.github.com/users/drogus/events{/privacy}", "organizations_url": "https://api.github.com/users/drogus/orgs", "url": "https://api.github.com/users/drogus", "gists_url": "https://api.github.com/users/drogus/gists{/gist_id}", "html_url": "https://github.com/drogus", "subscriptions_url": "https://api.github.com/users/drogus/subscriptions", "avatar_url": "https://1.gravatar.com/avatar/582034b63279abeaa8e76acf12f5ee30?d=https%3A%2F%2Fidenticons.github.com%2F3202111cf90e7c816a472aaceb72b0df.png", "repos_url": "https://api.github.com/users/drogus/repos", "received_events_url": "https://api.github.com/users/drogus/received_events", "gravatar_id": "582034b63279abeaa8e76acf12f5ee30", "starred_url": "https://api.github.com/users/drogus/starred{/owner}{/repo}", "login": "drogus", "type": "User", "id": 5004, "followers_url": "https://api.github.com/users/drogus/followers"}, "owner": "rails", "_id": {"$oid": "52380fd5bd3543c15100d5b2"}, "id": 5412723, "issue_url": "https://api.github.com/repos/rails/rails/issues/6034"}
