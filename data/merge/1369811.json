{"updated_at": "2011-06-14T22:37:07Z", "repo": "rails", "created_at": "2011-06-14T22:37:07Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/1369811", "id": 1369811, "issue_url": "https://api.github.com/repos/rails/rails/issues/1648", "issue_id": 1648, "user": {"repos_url": "https://api.github.com/users/dlee/repos", "type": "User", "html_url": "https://github.com/dlee", "starred_url": "https://api.github.com/users/dlee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlee/subscriptions", "following_url": "https://api.github.com/users/dlee/following{/other_user}", "gravatar_id": "139de3f8c3d6ee008cdb3abd3da23908", "organizations_url": "https://api.github.com/users/dlee/orgs", "url": "https://api.github.com/users/dlee", "gists_url": "https://api.github.com/users/dlee/gists{/gist_id}", "avatar_url": "https://1.gravatar.com/avatar/139de3f8c3d6ee008cdb3abd3da23908?d=https%3A%2F%2Fidenticons.github.com%2F80177fe965b78111f4dfee80cfdc3689.png", "id": 7035, "events_url": "https://api.github.com/users/dlee/events{/privacy}", "login": "dlee", "received_events_url": "https://api.github.com/users/dlee/received_events", "followers_url": "https://api.github.com/users/dlee/followers"}, "body": "@dmathieu here's something you can run:\r\n\r\n```ruby\r\nacronym = \"API\"\r\n100.times { ActiveSupport::Inflector.inflections.acronym acronym.next!.dup }\r\nclass ActiveSupport::Inflector::Inflections\r\n  def acronym_regex2\r\n    @acronym_regex2 ||= /#{@acronyms.values.join(\"|\")}/\r\n  end\r\nend\r\nActiveSupport::Inflector.inflections.instance_exec do\r\n  Benchmark.bmbm do |x|\r\n    x.report(\"acronym_regex\") { 10_000_000.times { acronym_regex } }\r\n    x.report(\"acronym_regex2\") { 10_000_000.times { acronym_regex2 } }\r\n  end\r\nend\r\n```\r\ngives:\r\n\r\n```\r\nRehearsal --------------------------------------------------\r\nacronym_regex    2.020000   0.000000   2.020000 (  2.011851)\r\nacronym_regex2   3.530000   0.000000   3.530000 (  3.533895)\r\n----------------------------------------- total: 5.550000sec\r\n\r\n                     user     system      total        real\r\nacronym_regex    2.000000   0.000000   2.000000 (  2.005268)\r\nacronym_regex2   3.530000   0.000000   3.530000 (  3.528883)\r\n```\r\n\r\nThe 75% slowdown shouldn't be surprising. However, at this level, the impact on overall Rails performance is so low that it's not worth quibbling about. If implementing the method as a conditional set is what it takes to get this patch accepted, then I'd do it.", "_id": {"$oid": "523851e2bd3543c1510117f4"}, "html_url": "https://github.com/rails/rails/pull/1648#issuecomment-1369811"}
