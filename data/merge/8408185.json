{"updated_at": "2012-09-09T19:21:05Z", "repo": "rails", "created_at": "2012-09-09T19:21:05Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/8408185", "id": 8408185, "issue_url": "https://api.github.com/repos/rails/rails/issues/7547", "issue_id": 7547, "user": {"repos_url": "https://api.github.com/users/schneems/repos", "type": "User", "html_url": "https://github.com/schneems", "starred_url": "https://api.github.com/users/schneems/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schneems/subscriptions", "following_url": "https://api.github.com/users/schneems/following{/other_user}", "gravatar_id": "db953d125f5cc49756edb6149f1b813e", "organizations_url": "https://api.github.com/users/schneems/orgs", "url": "https://api.github.com/users/schneems", "gists_url": "https://api.github.com/users/schneems/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/db953d125f5cc49756edb6149f1b813e?d=https%3A%2F%2Fidenticons.github.com%2F6ef42a6eab211ddd71ac423a80b42d15.png", "id": 59744, "events_url": "https://api.github.com/users/schneems/events{/privacy}", "login": "schneems", "received_events_url": "https://api.github.com/users/schneems/received_events", "followers_url": "https://api.github.com/users/schneems/followers"}, "body": ":+1: on the feature, I :heart: postgresql datatypes. @steveklabnik  can you please flag this as AR?\n\nI did have a problem bootstrapping your fork:\n\nGemfile:\n```ruby\ngem 'rails',     :git => 'git://github.com/danmcclain/rails.git', :branch => 'pg-arrays'\n```\n\nThen I added the `pg` gem, ran `bundle install` and changed my database over to `postgresql`, then I ran `$ rake db:create` but it blew up:\n\n```shell\n$ bundle exec rake db:create\n\nPlease install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg_array_parser is not part of the bundle. Add it to Gemfile.)\n\n/Users/schneems/.rvm/gems/ruby-1.9.3-p194@heroku/gems/bundler-1.2.0/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem'\n```\n\nAfter adding it to my Gemfile, everything worked like suspected and I was able to add an integer array column to an existing table:\n\n```ruby\n  def change\n    add_column :foos, :int_array, :integer, :array => true\n  end\n```\n\nWorked great:\n```\n1.9.3p194 :006 > foo = Foo.last\n  Foo Load (5.1ms)  SELECT \"foos\".* FROM \"foos\" ORDER BY \"foos\".\"id\" DESC LIMIT 1\n => #<Foo id: 1, name: nil, created_at: \"2012-09-09 19:06:11\", updated_at: \"2012-09-09 19:06:11\", int_array: nil> \n1.9.3p194 :007 > foo.int_array = [1,2,3,4,5,6]\n => [1, 2, 3, 4, 5, 6] \n1.9.3p194 :008 > foo.save\n   (0.4ms)  BEGIN\n   (4.0ms)  UPDATE \"foos\" SET \"int_array\" = '{1,2,3,4,5,6}', \"updated_at\" = '2012-09-09 19:13:48.280150' WHERE \"foos\".\"id\" = 1\n   (0.5ms)  COMMIT\n => true \n1.9.3p194 :009 > Foo.last.int_array\n  Foo Load (0.7ms)  SELECT \"foos\".* FROM \"foos\" ORDER BY \"foos\".\"id\" DESC LIMIT 1\n => [1, 2, 3, 4, 5, 6] \n```\nIt's possible I did something wrong in the setup, but otherwise - as it stands this won't work out of the box. Let me know if you have debugging steps. I would like to see maximum data type support for PG in Rails. ", "_id": {"$oid": "523ddf91bd354364b900b001"}, "html_url": "https://github.com/rails/rails/pull/7547#issuecomment-8408185"}
