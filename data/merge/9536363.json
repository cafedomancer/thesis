{"body": "Interesting, I didn't try using another HashWithIndifferentAccess in the replace call.  It wasn't obvious that the Hash I was working with was actually a HashWithIndifferentAccess subtype.  It just looked like a Hash with a broken key? method after calling replace.\r\n\r\nThe merge, reverse_merge, reverse_merge!, and update methods can all receive either a Hash or HashWithIndifferentAccess as the argument.  The replace method needs to work the same way to avoid violating the [Liskov substitution principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle).", "url": "https://api.github.com/repos/rails/rails/issues/comments/9536363", "created_at": "2012-10-17T17:36:05Z", "html_url": "https://github.com/rails/rails/pull/7971#issuecomment-9536363", "updated_at": "2012-10-17T17:36:05Z", "repo": "rails", "issue_id": 7971, "user": {"following_url": "https://api.github.com/users/dgraham/following{/other_user}", "events_url": "https://api.github.com/users/dgraham/events{/privacy}", "organizations_url": "https://api.github.com/users/dgraham/orgs", "url": "https://api.github.com/users/dgraham", "gists_url": "https://api.github.com/users/dgraham/gists{/gist_id}", "html_url": "https://github.com/dgraham", "subscriptions_url": "https://api.github.com/users/dgraham/subscriptions", "avatar_url": "https://2.gravatar.com/avatar/82787f3fcc9e392fa214f5ac4ea4a3d8?d=https%3A%2F%2Fidenticons.github.com%2Ffb612c9d00c2c8579d3134506d69bed9.png", "repos_url": "https://api.github.com/users/dgraham/repos", "received_events_url": "https://api.github.com/users/dgraham/received_events", "gravatar_id": "82787f3fcc9e392fa214f5ac4ea4a3d8", "starred_url": "https://api.github.com/users/dgraham/starred{/owner}{/repo}", "login": "dgraham", "type": "User", "id": 122102, "followers_url": "https://api.github.com/users/dgraham/followers"}, "owner": "rails", "_id": {"$oid": "523dba58bd354364b90096d0"}, "id": 9536363, "issue_url": "https://api.github.com/repos/rails/rails/issues/7971"}
