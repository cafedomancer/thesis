{"updated_at": "2013-04-11T01:37:21Z", "repo": "rails", "created_at": "2013-04-11T01:37:21Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/16212553", "id": 16212553, "issue_url": "https://api.github.com/repos/rails/rails/issues/10164", "issue_id": 10164, "user": {"repos_url": "https://api.github.com/users/yahonda/repos", "type": "User", "html_url": "https://github.com/yahonda", "starred_url": "https://api.github.com/users/yahonda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yahonda/subscriptions", "following_url": "https://api.github.com/users/yahonda/following{/other_user}", "gravatar_id": "e2cb998e15d8e8fdef4f11a1f510fe74", "organizations_url": "https://api.github.com/users/yahonda/orgs", "url": "https://api.github.com/users/yahonda", "gists_url": "https://api.github.com/users/yahonda/gists{/gist_id}", "avatar_url": "https://2.gravatar.com/avatar/e2cb998e15d8e8fdef4f11a1f510fe74?d=https%3A%2F%2Fidenticons.github.com%2F3367b557da3cd3ce928461613980a77c.png", "id": 73684, "events_url": "https://api.github.com/users/yahonda/events{/privacy}", "login": "yahonda", "received_events_url": "https://api.github.com/users/yahonda/received_events", "followers_url": "https://api.github.com/users/yahonda/followers"}, "body": "This commit does not work with Oracle enhanced adapter.\r\n\r\n```ruby\r\n$ ARCONN=oracle ruby -Itest test/cases/relation_test.rb -n test_relation_merging_with_merged_joins\r\nUsing oracle\r\nRun options: -n test_relation_merging_with_merged_joins --seed 47159\r\n\r\n# Running tests:\r\n\r\nE\r\n\r\nFinished tests in 0.232510s, 4.3009 tests/s, 0.0000 assertions/s.\r\n\r\n  1) Error:\r\nActiveRecord::RelationTest#test_relation_merging_with_merged_joins:\r\nActiveRecord::StatementInvalid: OCIError: ORA-00979: not a GROUP BY expression: SELECT \"POSTS\".* FROM \"POSTS\" INNER JOIN \"COMMENTS\" ON \"COMMENTS\".\"POST_ID\" = \"POSTS\".\"ID\" AND \"COMMENTS\".\"TYPE\" IN ('SpecialComment', 'SubSpecialComment') LEFT OUTER JOIN \"RATINGS\" ON \"RATINGS\".\"COMMENT_ID\" = \"COMMENTS\".\"ID\" WHERE \"POSTS\".\"AUTHOR_ID\" = :a1 AND \"COMMENTS\".\"TYPE\" IN ('SpecialComment', 'SubSpecialComment') GROUP BY posts.id\r\n    stmt.c:230:in oci8lib_200.so\r\n    /home/yahonda/.rvm/gems/ruby-2.0.0-p0@railsmaster/gems/ruby-oci8-2.1.5/lib/oci8/cursor.rb:126:in `exec'\r\n    /home/yahonda/git/oracle-enhanced/lib/active_record/connection_adapters/oracle_enhanced_oci_connection.rb:143:in `exec'\r\n    /home/yahonda/git/oracle-enhanced/lib/active_record/connection_adapters/oracle_enhanced_adapter.rb:759:in `block in exec_query'\r\n    /home/yahonda/git/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:425:in `block in log'\r\n    /home/yahonda/git/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\r\n    /home/yahonda/git/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:420:in `log'\r\n    /home/yahonda/git/oracle-enhanced/lib/active_record/connection_adapters/oracle_enhanced_adapter.rb:1501:in `log'\r\n    /home/yahonda/git/oracle-enhanced/lib/active_record/connection_adapters/oracle_enhanced_adapter.rb:739:in `exec_query'\r\n    /home/yahonda/git/oracle-enhanced/lib/active_record/connection_adapters/oracle_enhanced_adapter.rb:1455:in `select'\r\n    /home/yahonda/git/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'\r\n    /home/yahonda/git/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'\r\n    /home/yahonda/git/rails/activerecord/lib/active_record/querying.rb:36:in `find_by_sql'\r\n    /home/yahonda/git/rails/activerecord/lib/active_record/relation.rb:561:in `exec_queries'\r\n    /home/yahonda/git/rails/activerecord/lib/active_record/relation.rb:447:in `load'\r\n    /home/yahonda/git/rails/activerecord/lib/active_record/relation.rb:196:in `to_a'\r\n    test/cases/relation_test.rb:185:in `test_relation_merging_with_merged_joins'\r\n\r\n1 tests, 0 assertions, 0 failures, 1 errors, 0 skips\r\n$\r\n```\r\n\r\nEvery column selected also needs to be written in `group by` clause. I do not have fix yet, just posted errors.", "_id": {"$oid": "523cf276bd354364b90036e8"}, "html_url": "https://github.com/rails/rails/pull/10164#issuecomment-16212553"}
