{"issue_url": "https://api.github.com/repos/rails/rails/issues/8185", "repo": "rails", "body": "@senny, test fails on rails master. But fails only sometimes. I've run tests about 10 times and got 3 failures. Using ruby 1.9.3p327 (resulting json is the same, just options order messed up)\r\n\r\n<pre>\r\ntest_to_json_should_not_keep_options_around(TestJSONEncoding) [rails/activesupport/test/json/encoding_test.rb:279]:\r\n--- expected\r\n+++ actual\r\n@@ -1 +1 @@\r\n-\"{\\\"foo\\\":{\\\"foo\\\":\\\"hello\\\",\\\"bar\\\":\\\"world\\\"},\\\"other_hash\\\":{\\\"foo\\\":\\\"other_foo\\\",\\\"test\\\":\\\"other_test\\\"}}\"\r\n+\"{\\\"foo\\\":{\\\"bar\\\":\\\"world\\\",\\\"foo\\\":\\\"hello\\\"},\\\"other_hash\\\":{\\\"foo\\\":\\\"other_foo\\\",\\\"test\\\":\\\"other_test\\\"}}\"\r\n</pre>\r\n\r\nbundle list\r\n\r\n<pre>\r\n  * actionpack (4.0.0.beta)\r\n  * activemodel (4.0.0.beta)\r\n  * activerecord (4.0.0.beta)\r\n  * activerecord-deprecated_finders (0.0.1 2125c7b)\r\n  * activesupport (4.0.0.beta)\r\n  * arel (3.0.2.20120819075748 38d0a22)\r\n  * atomic (1.0.1)\r\n  * bcrypt-ruby (3.0.1)\r\n  * benchmark-ips (1.2.0)\r\n  * builder (3.1.4)\r\n  * bundler (1.2.2)\r\n  * coffee-rails (4.0.0.beta 052634e)\r\n  * coffee-script (2.2.0)\r\n  * coffee-script-source (1.4.0)\r\n  * columnize (0.3.6)\r\n  * dalli (2.6.0)\r\n  * debugger (1.2.2)\r\n  * debugger-linecache (1.1.2)\r\n  * debugger-ruby_core_source (1.1.5)\r\n  * erubis (2.7.0)\r\n  * execjs (1.4.0)\r\n  * hike (1.2.1)\r\n  * i18n (0.6.1)\r\n  * jquery-rails (2.1.4 cf47e71)\r\n  * json (1.7.5)\r\n  * kindlerb (0.1.1)\r\n  * mail (2.5.3)\r\n  * metaclass (0.0.1)\r\n  * mime-types (1.19)\r\n  * minitest (4.3.3)\r\n  * mocha (0.13.1)\r\n  * multi_json (1.5.0)\r\n  * mustache (0.99.4)\r\n  * mysql (2.9.0)\r\n  * mysql2 (0.3.11)\r\n  * nokogiri (1.5.6)\r\n  * pg (0.14.1)\r\n  * polyglot (0.3.3)\r\n  * racc (1.4.9)\r\n  * rack (1.4.1)\r\n  * rack-cache (1.2)\r\n  * rack-test (0.6.2 1b1e730)\r\n  * rails (4.0.0.beta 99bcb42)\r\n  * railties (4.0.0.beta)\r\n  * rake (10.0.3)\r\n  * rdoc (3.12)\r\n  * redcarpet (2.2.2)\r\n  * ruby-prof (0.11.2)\r\n  * sdoc (0.3.20 87ad100)\r\n  * sprockets (2.8.2)\r\n  * sprockets-rails (2.0.0.rc1 0228520)\r\n  * sqlite3 (1.3.6)\r\n  * thor (0.16.0)\r\n  * thread_safe (0.1.0)\r\n  * tilt (1.3.3)\r\n  * treetop (1.4.12)\r\n  * turbolinks (0.6.1)\r\n  * tzinfo (0.3.35)\r\n  * uglifier (1.3.0)\r\n  * w3c_validators (1.2)\r\n  * yajl-ruby (1.1.0)\r\n</pre>", "_id": {"$oid": "523da3e8bd354364b90089ed"}, "issue_id": 8185, "url": "https://api.github.com/repos/rails/rails/issues/comments/11702226", "html_url": "https://github.com/rails/rails/pull/8185#issuecomment-11702226", "updated_at": "2012-12-27T06:50:37Z", "user": {"subscriptions_url": "https://api.github.com/users/slbug/subscriptions", "events_url": "https://api.github.com/users/slbug/events{/privacy}", "repos_url": "https://api.github.com/users/slbug/repos", "gists_url": "https://api.github.com/users/slbug/gists{/gist_id}", "url": "https://api.github.com/users/slbug", "login": "slbug", "gravatar_id": "ce5d1a4d26241d16575889a6f1ed4487", "html_url": "https://github.com/slbug", "following_url": "https://api.github.com/users/slbug/following{/other_user}", "received_events_url": "https://api.github.com/users/slbug/received_events", "organizations_url": "https://api.github.com/users/slbug/orgs", "avatar_url": "https://1.gravatar.com/avatar/ce5d1a4d26241d16575889a6f1ed4487?d=https%3A%2F%2Fidenticons.github.com%2F85f539c5eb05d1c0b7e37471aa27db6f.png", "starred_url": "https://api.github.com/users/slbug/starred{/owner}{/repo}", "id": 108694, "followers_url": "https://api.github.com/users/slbug/followers", "type": "User"}, "created_at": "2012-12-27T06:50:01Z", "id": 11702226, "owner": "rails"}
