{"body": "@dhh and @jonleighton thanks for the feedback! I did some work on building in polymorphic support but wasn't sure exactly what use cases you were looking for. \n\nThere's a shallow query that's pretty trivial:\n\n```ruby\nPriceEstimate.where(:estimate_of_type => 'Treasure', :estimate_of_id => treasure)\nPriceEstimate.where(:estimate_of => treasure)\n```\n\nBut then things start getting more complicated when you look at a nested query like:\n\n```ruby\nTreasure.where(:price_estimates => {:estimate_of_type => 'Treasure', :estimate_of_id => treasure}).joins(:price_estimates)\nTreasure.where(:price_estimates => {:estimate_of => treasure}).joins(:price_estimates)\n```\n\nI have both cases working, but the second is [more complicated](https://github.com/beerlington/rails/blob/0df2f082005ce0f57a544c30c646d1bae45bbcf8/activerecord/lib/active_record/relation/predicate_reflection.rb#L19-25) since it has to look at the polymorphic model's reflection and doesn't work on has_one associations. If the second use case is not something you envision people using, then it may not be worth the added complexity.\n\nI pushed up my changes, but wanted to make sure I had all the [test cases covered](https://github.com/beerlington/rails/blob/0df2f082005ce0f57a544c30c646d1bae45bbcf8/activerecord/test/cases/relation/where_test.rb#L24-50) before updating the docs & changelog and rebasing.", "url": "https://api.github.com/repos/rails/rails/issues/comments/7572634", "created_at": "2012-08-08T01:36:02Z", "html_url": "https://github.com/rails/rails/pull/7273#issuecomment-7572634", "updated_at": "2012-08-08T01:36:02Z", "repo": "rails", "issue_id": 7273, "user": {"following_url": "https://api.github.com/users/beerlington/following{/other_user}", "events_url": "https://api.github.com/users/beerlington/events{/privacy}", "organizations_url": "https://api.github.com/users/beerlington/orgs", "url": "https://api.github.com/users/beerlington", "gists_url": "https://api.github.com/users/beerlington/gists{/gist_id}", "html_url": "https://github.com/beerlington", "subscriptions_url": "https://api.github.com/users/beerlington/subscriptions", "avatar_url": "https://0.gravatar.com/avatar/45b75f9f866d240362c0d7fa125025ba?d=https%3A%2F%2Fidenticons.github.com%2F75a8415011978d373d5ce689611a62cc.png", "repos_url": "https://api.github.com/users/beerlington/repos", "received_events_url": "https://api.github.com/users/beerlington/received_events", "gravatar_id": "45b75f9f866d240362c0d7fa125025ba", "starred_url": "https://api.github.com/users/beerlington/starred{/owner}{/repo}", "login": "beerlington", "type": "User", "id": 77580, "followers_url": "https://api.github.com/users/beerlington/followers"}, "owner": "rails", "_id": {"$oid": "523dfa91bd354364b900c0f1"}, "id": 7572634, "issue_url": "https://api.github.com/repos/rails/rails/issues/7273"}
