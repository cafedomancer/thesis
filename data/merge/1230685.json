{"updated_at": "2011-05-24T19:32:15Z", "repo": "rails", "created_at": "2011-05-24T19:31:16Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/1230685", "id": 1230685, "issue_url": "https://api.github.com/repos/rails/rails/issues/1239", "issue_id": 1239, "user": {"repos_url": "https://api.github.com/users/alindeman/repos", "type": "User", "html_url": "https://github.com/alindeman", "starred_url": "https://api.github.com/users/alindeman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alindeman/subscriptions", "following_url": "https://api.github.com/users/alindeman/following{/other_user}", "gravatar_id": "1d41b66ab243250e4268869049dfffc4", "organizations_url": "https://api.github.com/users/alindeman/orgs", "url": "https://api.github.com/users/alindeman", "gists_url": "https://api.github.com/users/alindeman/gists{/gist_id}", "avatar_url": "https://2.gravatar.com/avatar/1d41b66ab243250e4268869049dfffc4?d=https%3A%2F%2Fidenticons.github.com%2F6244790ca5b487a04fa497e0cfc1d481.png", "id": 395621, "events_url": "https://api.github.com/users/alindeman/events{/privacy}", "login": "alindeman", "received_events_url": "https://api.github.com/users/alindeman/received_events", "followers_url": "https://api.github.com/users/alindeman/followers"}, "body": "Given (I've seen objects even \"bigger\" than this need to be encoded for certain special cases):\n\n```ruby\nbig_object = 500.times.map { |i| Hash[('a'..'z').map { |j| [j, j] }] }\n```\n\n<pre>\nruby-1.9.2-p180 :016 > Benchmark.bm do |x|\nruby-1.9.2-p180 :017 >     x.report('array') { 100.times { ActiveSupport::JSON.encode(big_object) } }\nruby-1.9.2-p180 :018?>   end\n      user     system      total        real\narray 28.600000   0.100000  28.700000 ( 28.703123)\n</pre>\n\n<pre>\nruby-1.9.2-p180 :011 > Benchmark.bm do |x|\nruby-1.9.2-p180 :012 >     x.report('set') { 100.times { ActiveSupport::JSON.encode(big_object) } }\nruby-1.9.2-p180 :013?>   end\n      user     system      total        real\nset 27.440000   0.110000  27.550000 ( 27.546195)\n</pre>\n\nWhile the numbers varied slightly over multiple runs, set always beat array by a significant enough margin for me to think this small patch is worth applying.", "_id": {"$oid": "52385b17bd3543c151011dfc"}, "html_url": "https://github.com/rails/rails/pull/1239#issuecomment-1230685"}
