{"issue_url": "https://api.github.com/repos/rails/rails/issues/7316", "repo": "rails", "body": "I just tried it, and I am still running into the same issue.  Added this to `Gemfile` and ran `bundle update`:\n\n    gem 'rails', github: 'brainopia/rails', branch: 'backport_fix_session_store_options'\n\nVerified that I've got the right version with `bundle show rails`:\n\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728\n\nHad an active session still after restarting my server, so it seemed to work while logged in.  When I hit the logout link (Devise::SessionsController#destroy), I got the following error, which is the same I've been seeing previously:\n\n    can't convert Symbol into String\n\nThe full stack trace:\n\n    rack (1.4.1) lib/rack/utils.rb:219:in `+'\n    rack (1.4.1) lib/rack/utils.rb:219:in `set_cookie_header!'\n    rack (1.4.1) lib/rack/session/abstract/id.rb:342:in `set_cookie'\n    rack (1.4.1) lib/rack/session/abstract/id.rb:330:in `commit_session'\n    rack (1.4.1) lib/rack/session/abstract/id.rb:206:in `context'\n    rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/cookies.rb:341:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/activerecord/lib/active_record/query_cache.rb:64:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/activesupport/lib/active_support/callbacks.rb:405:in `_run__697476040253588495__call__824283531016059787__callbacks'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/activesupport/lib/active_support/callbacks.rb:405:in `__run_callback'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/activesupport/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/activesupport/lib/active_support/callbacks.rb:81:in `run_callbacks'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/reloader.rb:65:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/railties/lib/rails/rack/logger.rb:26:in `call_app'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/railties/lib/rails/rack/logger.rb:16:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/request_id.rb:22:in `call'\n    rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'\n    rack (1.4.1) lib/rack/runtime.rb:17:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'\n    rack (1.4.1) lib/rack/lock.rb:15:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/actionpack/lib/action_dispatch/middleware/static.rb:62:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/railties/lib/rails/engine.rb:479:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/railties/lib/rails/application.rb:223:in `call'\n    rack (1.4.1) lib/rack/content_length.rb:14:in `call'\n    /Users/mhuggins/.rvm/gems/ruby-1.9.3-p0@ccg-rails/bundler/gems/rails-ca07bc0de728/railties/lib/rails/rack/log_tailer.rb:17:in `call'\n    rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'\n    /Users/mhuggins/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'\n    /Users/mhuggins/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'\n    /Users/mhuggins/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'", "_id": {"$oid": "5237fd49bd3543c15100baf9"}, "issue_id": 7316, "url": "https://api.github.com/repos/rails/rails/issues/comments/7642324", "html_url": "https://github.com/rails/rails/pull/7316#issuecomment-7642324", "updated_at": "2012-08-10T13:46:45Z", "user": {"subscriptions_url": "https://api.github.com/users/mhuggins/subscriptions", "events_url": "https://api.github.com/users/mhuggins/events{/privacy}", "repos_url": "https://api.github.com/users/mhuggins/repos", "gists_url": "https://api.github.com/users/mhuggins/gists{/gist_id}", "url": "https://api.github.com/users/mhuggins", "login": "mhuggins", "gravatar_id": "781f66c42983ae7ee3123bbd620d8568", "html_url": "https://github.com/mhuggins", "following_url": "https://api.github.com/users/mhuggins/following{/other_user}", "received_events_url": "https://api.github.com/users/mhuggins/received_events", "organizations_url": "https://api.github.com/users/mhuggins/orgs", "avatar_url": "https://0.gravatar.com/avatar/781f66c42983ae7ee3123bbd620d8568?d=https%3A%2F%2Fidenticons.github.com%2F8cc10a343f7cacddbbc5488786f3f22b.png", "starred_url": "https://api.github.com/users/mhuggins/starred{/owner}{/repo}", "id": 169093, "followers_url": "https://api.github.com/users/mhuggins/followers", "type": "User"}, "created_at": "2012-08-10T13:46:45Z", "id": 7642324, "owner": "rails"}
