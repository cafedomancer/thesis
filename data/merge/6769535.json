{"body": "@nahi exactly, take it as given that the secret is a securely generated master key which is secret.  derive_key will be called with a salt which is either static, or configurable, for the sole purpose of deterministically generating keys to be used for other purposes in the application.\n\nWe can't use a random salt obviously, otherwise those keys are non-deterministic and we can't then re-validate cookies signed or encrypted with them.\n\nQuestions of timing attacks etc are moot as this only generates the keys, existing code in MessageVerifier does the hmac validation and that won't be changing.", "url": "https://api.github.com/repos/rails/rails/issues/comments/6769535", "created_at": "2012-07-04T23:55:07Z", "html_url": "https://github.com/rails/rails/pull/6952#issuecomment-6769535", "updated_at": "2012-07-04T23:55:07Z", "repo": "rails", "issue_id": 6952, "user": {"following_url": "https://api.github.com/users/NZKoz/following{/other_user}", "events_url": "https://api.github.com/users/NZKoz/events{/privacy}", "organizations_url": "https://api.github.com/users/NZKoz/orgs", "url": "https://api.github.com/users/NZKoz", "gists_url": "https://api.github.com/users/NZKoz/gists{/gist_id}", "html_url": "https://github.com/NZKoz", "subscriptions_url": "https://api.github.com/users/NZKoz/subscriptions", "avatar_url": "https://0.gravatar.com/avatar/efa76b164a7de4a5730e4fa397cc4425?d=https%3A%2F%2Fidenticons.github.com%2F85d8ce590ad8981ca2c8286f79f59954.png", "repos_url": "https://api.github.com/users/NZKoz/repos", "received_events_url": "https://api.github.com/users/NZKoz/received_events", "gravatar_id": "efa76b164a7de4a5730e4fa397cc4425", "starred_url": "https://api.github.com/users/NZKoz/starred{/owner}{/repo}", "login": "NZKoz", "type": "User", "id": 197, "followers_url": "https://api.github.com/users/NZKoz/followers"}, "owner": "rails", "_id": {"$oid": "52380195bd3543c15100c172"}, "id": 6769535, "issue_url": "https://api.github.com/repos/rails/rails/issues/6952"}
