{"issue_url": "https://api.github.com/repos/rails/rails/issues/9042", "repo": "rails", "body": "@acapilleri I adjusted the Regexp as you described but I'm not sure it's actually solving the problem:\r\n\r\n```ruby\r\n  def test_integer_zero_to_string_float_marked_as_changed\r\n    Pirate.validates :parrot_id, :numericality => { :only_integer => true }\r\n    pirate = Pirate.new\r\n    pirate.catchphrase = \"Yarrrr, me hearties\"\r\n    pirate.parrot_id = 0\r\n    pirate.save!\r\n\r\n    pirate.parrot_id = '0.00001'\r\n    p pirate.valid? # => false\r\n    p pirate.parrot_id # => 0\r\n    p pirate.parrot_id_before_type_cast # => \"0.00001\"\r\n    p pirate.changed? # => true\r\n    p pirate.changes # => {\"parrot_id\"=>[0, 0]}\r\n  end\r\n```\r\n\r\nThe `Numericality` validator uses the value before the type cast. That's why it's marked as \"invalid\". On the other hand, the changes hash uses the value after the type cast and it does not really make sense.\r\n\r\n@rafaelfranca This problem existed before my patch so I don't think we should mix them together. What is your opinion?", "_id": {"$oid": "523d5c7bbd354364b9006203"}, "issue_id": 9042, "url": "https://api.github.com/repos/rails/rails/issues/comments/12707706", "html_url": "https://github.com/rails/rails/pull/9042#issuecomment-12707706", "updated_at": "2013-01-25T16:18:58Z", "user": {"subscriptions_url": "https://api.github.com/users/senny/subscriptions", "events_url": "https://api.github.com/users/senny/events{/privacy}", "repos_url": "https://api.github.com/users/senny/repos", "gists_url": "https://api.github.com/users/senny/gists{/gist_id}", "url": "https://api.github.com/users/senny", "login": "senny", "gravatar_id": "3d698e2872c07061a455d9e250861235", "html_url": "https://github.com/senny", "following_url": "https://api.github.com/users/senny/following{/other_user}", "received_events_url": "https://api.github.com/users/senny/received_events", "organizations_url": "https://api.github.com/users/senny/orgs", "avatar_url": "https://1.gravatar.com/avatar/3d698e2872c07061a455d9e250861235?d=https%3A%2F%2Fidenticons.github.com%2Fd1359f9934ee5a75ed441ffce412a0a1.png", "starred_url": "https://api.github.com/users/senny/starred{/owner}{/repo}", "id": 5402, "followers_url": "https://api.github.com/users/senny/followers", "type": "User"}, "created_at": "2013-01-25T16:18:58Z", "id": 12707706, "owner": "rails"}
