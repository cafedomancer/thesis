{"updated_at": "2011-10-06T08:46:17Z", "repo": "rails", "created_at": "2011-10-06T08:46:17Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/2307753", "id": 2307753, "issue_url": "https://api.github.com/repos/rails/rails/issues/3225", "issue_id": 3225, "user": {"repos_url": "https://api.github.com/users/mjtko/repos", "type": "User", "html_url": "https://github.com/mjtko", "starred_url": "https://api.github.com/users/mjtko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjtko/subscriptions", "following_url": "https://api.github.com/users/mjtko/following{/other_user}", "gravatar_id": "be9f8a7e49b430ac89efe1bc8aa1026d", "organizations_url": "https://api.github.com/users/mjtko/orgs", "url": "https://api.github.com/users/mjtko", "gists_url": "https://api.github.com/users/mjtko/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/be9f8a7e49b430ac89efe1bc8aa1026d?d=https%3A%2F%2Fidenticons.github.com%2F88d16337f620f14a9d05a6b5d459802c.png", "id": 206834, "events_url": "https://api.github.com/users/mjtko/events{/privacy}", "login": "mjtko", "received_events_url": "https://api.github.com/users/mjtko/received_events", "followers_url": "https://api.github.com/users/mjtko/followers"}, "body": "Hi @thomasfedb,\r\n \r\nJust working this through, I think it's worth stating how the code works at the moment.  This current code current says:\r\n\r\n 1. If the primary compilation is under a `digest = true` configuration, then we should also explicitly compile nondigest assets.\r\n 2. If the primary compilation is under a `digest = false` configuration, then we've already compiled nondigest assets so we don't need to explicitly compile them.\r\n\r\nMy interpretation is that your suggestion is:\r\n\r\n 1. Non-digest assets are always explicitly compiled.\r\n 2. If the primary compilation is under a `digest = true` configuration, then we should explicitly compile digest assets.\r\n\r\nWhile I agree that the condition now looks more sensible, the downsides are:\r\n\r\n 1. We have to change more code, so a manifest file is always generated (probably not too much hassle :)), even if the manifest file is going to be overwritten.\r\n 2. The digest compilation task would need to explicitly set `digest = true`.\r\n 3. More re-invocations of the rake task when not necessary - if `digest = false` we additionally reinvoke once for nondigest.  If `digest = true` we reinvoke additionally once for digest. Under the current code no reinvocation is necessary for the primary compilation run.  \r\n\r\nIn short, while I agree with you to some extent, I'm not sure that the gains outweigh the costs.  Would you be satisfied with a comment explaining why the logic looks inverted for the nondigest reinvocation? :)  If not, I suggest we don't patch until after 3.1.1 is out of the door. :-)\r\n", "_id": {"$oid": "52383942bd3543c15101009e"}, "html_url": "https://github.com/rails/rails/pull/3225#issuecomment-2307753"}
