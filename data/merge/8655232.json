{"updated_at": "2012-09-18T13:46:27Z", "repo": "rails", "created_at": "2012-09-18T13:46:27Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/8655232", "id": 8655232, "issue_url": "https://api.github.com/repos/rails/rails/issues/7668", "issue_id": 7668, "user": {"repos_url": "https://api.github.com/users/Draiken/repos", "type": "User", "html_url": "https://github.com/Draiken", "starred_url": "https://api.github.com/users/Draiken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Draiken/subscriptions", "following_url": "https://api.github.com/users/Draiken/following{/other_user}", "gravatar_id": "cfc0367c8a13da57a21c409e44895a4f", "organizations_url": "https://api.github.com/users/Draiken/orgs", "url": "https://api.github.com/users/Draiken", "gists_url": "https://api.github.com/users/Draiken/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/cfc0367c8a13da57a21c409e44895a4f?d=https%3A%2F%2Fidenticons.github.com%2F78ddf572aeccb7455c4b67a40045a965.png", "id": 287889, "events_url": "https://api.github.com/users/Draiken/events{/privacy}", "login": "Draiken", "received_events_url": "https://api.github.com/users/Draiken/received_events", "followers_url": "https://api.github.com/users/Draiken/followers"}, "body": "I am trying to add a test for this but I am not sure how to reproduce this error in the test env. Tried this:\n\n    def test_shorthand_route_with_namespace\n      fakeset = FakeSet.new\n      mapper = Mapper.new fakeset\n      mapper.scope :module => 'engine' do\n        mapper.get 'controller/action'\n      end\n      assert_equal '/engine/controller/action(.:format)', fakeset.conditions.first[:path_info]\n    end\n\nBut it doesn't add the `/engine` path, since the `:module` option just adds the module to the controller part, not to the path. Looking around in the engine code, the only default_scope added by the engine's routes is the `:module`, so it also doesn't add the prefix to the route path.\n\nMy guess is this specific path is added somewhere later in the process when the engine is loaded and the isolated flag is true, then it fixes the path.\n\nSo, how should I proceed with testing? Is this the right direction? Should I keep it on mapper_test, or move it somewhere else?\n\nSorry for all these questions... This is my first rails contribution", "_id": {"$oid": "5237f90dbd3543c15100b3b8"}, "html_url": "https://github.com/rails/rails/pull/7668#issuecomment-8655232"}
