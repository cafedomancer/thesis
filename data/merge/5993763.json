{"body": "I've tried to monkey-patch merge this into my Rails 3.2.3 app, to see if it gets rid of my connectionpool problems. \n\nBit tricky to merge it into Rails 3.2.3, things have changed so much even before this patch. But I think I've done it. \n\nI _think_ it is creating fairer access to the pool, with less 'stolen' connections -- my average times waiting for checkout are going down. \n\nHowever, I think I've still got a connectionpool _leak_ in my app -- only after it's been under a production load for 20 minutes or so, all the threads start getting exceptions unable to get connections -- my guess is this is _leaked_ connections, rather than a fairness issue. \n\nIf so, hard to say if it's caused by this patch, by other changes to master vs rails 3, or by my own app code (but I've spent a heck of a lot of time with my app code trying to keep it from leaking connections). Or by improperly merging the patch into rails 3.2.3 in my app.  I was not getting quite this behavior (after 20 minutes of production mode, hardly anyone can get a connection) prior to merging in this new implementation. But I have merged it in improperly too, alas. \n\nThis stuff is very hard to debug. \n\nSo, I'm not sure what info this gives, if any. I was hoping to be able to say this patch solved all my problems. ", "url": "https://api.github.com/repos/rails/rails/issues/comments/5993763", "created_at": "2012-05-29T19:46:01Z", "html_url": "https://github.com/rails/rails/pull/6492#issuecomment-5993763", "updated_at": "2012-05-29T19:46:01Z", "repo": "rails", "issue_id": 6492, "user": {"following_url": "https://api.github.com/users/jrochkind/following{/other_user}", "events_url": "https://api.github.com/users/jrochkind/events{/privacy}", "organizations_url": "https://api.github.com/users/jrochkind/orgs", "url": "https://api.github.com/users/jrochkind", "gists_url": "https://api.github.com/users/jrochkind/gists{/gist_id}", "html_url": "https://github.com/jrochkind", "subscriptions_url": "https://api.github.com/users/jrochkind/subscriptions", "avatar_url": "https://0.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?d=https%3A%2F%2Fidenticons.github.com%2Fd54ea80e1dddb765bab019d4dfe36c23.png", "repos_url": "https://api.github.com/users/jrochkind/repos", "received_events_url": "https://api.github.com/users/jrochkind/received_events", "gravatar_id": "6a13e655e637138f8d571cec3f9cea76", "starred_url": "https://api.github.com/users/jrochkind/starred{/owner}{/repo}", "login": "jrochkind", "type": "User", "id": 149304, "followers_url": "https://api.github.com/users/jrochkind/followers"}, "owner": "rails", "_id": {"$oid": "52380779bd3543c15100cabb"}, "id": 5993763, "issue_url": "https://api.github.com/repos/rails/rails/issues/6492"}
