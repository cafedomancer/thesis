{"updated_at": "2011-11-10T09:23:43Z", "repo": "rails", "created_at": "2011-11-10T09:23:27Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/2693137", "id": 2693137, "issue_url": "https://api.github.com/repos/rails/rails/issues/3592", "issue_id": 3592, "user": {"repos_url": "https://api.github.com/users/avakhov/repos", "type": "User", "html_url": "https://github.com/avakhov", "starred_url": "https://api.github.com/users/avakhov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avakhov/subscriptions", "following_url": "https://api.github.com/users/avakhov/following{/other_user}", "gravatar_id": "54e74983d81fa2fbe4c28e8392532f18", "organizations_url": "https://api.github.com/users/avakhov/orgs", "url": "https://api.github.com/users/avakhov", "gists_url": "https://api.github.com/users/avakhov/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/54e74983d81fa2fbe4c28e8392532f18?d=https%3A%2F%2Fidenticons.github.com%2Fedb3b863d9333073200581afe223ec23.png", "id": 92554, "events_url": "https://api.github.com/users/avakhov/events{/privacy}", "login": "avakhov", "received_events_url": "https://api.github.com/users/avakhov/received_events", "followers_url": "https://api.github.com/users/avakhov/followers"}, "body": "It's almost the same. My regexp in just simplification of original (without (?:[\"'])[^<>]* and without groups)\r\n\r\n``` ruby\r\nrequire 'benchmark'\r\n\r\na = b = nil\r\ns = \"<br class='abc'>\"*5_000_000\r\n\r\nBenchmark.bm do |x|\r\n  x.report { a = s.gsub(/(br)(?![^<]*?>)/i, '<b>\\1</b>') }\r\n  x.report { b = s.gsub(/(br)(?!(?:[^<]*?)(?:[\"'])[^<>]*>)/i, '<b>\\1</b>') }\r\nend\r\n\r\np(a == b)\r\np RUBY_VERSION\r\n```\r\n\r\noutput:\r\n\r\n```\r\n      user     system      total        real\r\n  5.700000   0.040000   5.740000 (  5.843027)\r\n  5.910000   0.010000   5.920000 (  5.997170)\r\ntrue\r\n\"1.9.2\"\r\n```", "_id": {"$oid": "52383495bd3543c15100fb77"}, "html_url": "https://github.com/rails/rails/pull/3592#issuecomment-2693137"}
