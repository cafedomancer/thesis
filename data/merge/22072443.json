{"updated_at": "2013-08-04T18:06:00Z", "repo": "rails", "created_at": "2013-08-04T14:20:04Z", "owner": "rails", "url": "https://api.github.com/repos/rails/rails/issues/comments/22072443", "id": 22072443, "issue_url": "https://api.github.com/repos/rails/rails/issues/11743", "issue_id": 11743, "user": {"repos_url": "https://api.github.com/users/gaurish/repos", "type": "User", "html_url": "https://github.com/gaurish", "starred_url": "https://api.github.com/users/gaurish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaurish/subscriptions", "following_url": "https://api.github.com/users/gaurish/following{/other_user}", "gravatar_id": "cb0b42e452cd13d469565a23a8abe441", "organizations_url": "https://api.github.com/users/gaurish/orgs", "url": "https://api.github.com/users/gaurish", "gists_url": "https://api.github.com/users/gaurish/gists{/gist_id}", "avatar_url": "https://0.gravatar.com/avatar/cb0b42e452cd13d469565a23a8abe441?d=https%3A%2F%2Fidenticons.github.com%2F58861ae4fb7b472c95e64685229ad9ed.png", "id": 235844, "events_url": "https://api.github.com/users/gaurish/events{/privacy}", "login": "gaurish", "received_events_url": "https://api.github.com/users/gaurish/received_events", "followers_url": "https://api.github.com/users/gaurish/followers"}, "body": "**[Update]**\r\nI did more research & this issue is weird.  So bear with me, but here is what happening:-\r\n\r\nminitest's [`setup` & `teardown` hooks](https://github.com/rails/rails/blob/master/actionview/test/template/digestor_test.rb#L24-L36)are not being executed On JRuby & get executed on MRI. Exact same code but different behaviour:\r\n\r\n```ruby\r\ndef setup\r\n    @cwd = Dir.pwd\r\n    @tmp_dir = Dir.mktmpdir\r\n\r\n    FileUtils.cp_r FixtureFinder::FIXTURES_DIR, @tmp_dir\r\n    Dir.chdir @tmp_dir\r\n  end\r\n```\r\nSince these methods are not being called, hence the code in this methods is simply not being executed hence there is no tempdir being created, causing the tests to fail.\r\n\r\n so to test this hypothesis, I Added `raise` in setup method to see what happens.\r\n\r\n```ruby\r\ndef setup\r\n    @cwd = Dir.pwd\r\n    @tmp_dir = Dir.mktmpdir\r\n   raise \"Hey look, I only cause an RuntimeError Exception on MRI\"   \r\n    FileUtils.cp_r FixtureFinder::FIXTURES_DIR, @tmp_dir\r\n    Dir.chdir @tmp_dir\r\n  end\r\n```\r\nThis is were wierd part happens, this  gets raise RuntimeError Exception on MRI. nothing happens on JRuby :warning: \r\nso, wondering can anyone people can replicate this behaviour? \r\n\r\nPS:  I am guessing this behaviour has something to do with the way minitest runs these hooks", "_id": {"$oid": "5237d1a1bd3543c151007df2"}, "html_url": "https://github.com/rails/rails/pull/11743#issuecomment-22072443"}
