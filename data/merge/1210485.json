{"issue_url": "https://api.github.com/repos/rails/rails/issues/1163", "repo": "rails", "body": "Given the `instance_eval` gotchas that @josevalim mentioned, and the fact that there are _tons_ of migrations out in the wild with the old syntax, I think both ways should be supported.  That way, old migrations do not break, and people who prefer the non-`instance_eval` syntax and still choose to avoid it.  Here's a simple way to accomplish that:\n\n``` ruby\nif blk.arity == 1\n  blk.call(td)\nelse\n  td.instance_eval(&blk)\nend\n```", "_id": {"$oid": "52385c78bd3543c151011f03"}, "issue_id": 1163, "url": "https://api.github.com/repos/rails/rails/issues/comments/1210485", "html_url": "https://github.com/rails/rails/pull/1163#issuecomment-1210485", "updated_at": "2011-05-20T15:03:38Z", "user": {"subscriptions_url": "https://api.github.com/users/myronmarston/subscriptions", "events_url": "https://api.github.com/users/myronmarston/events{/privacy}", "repos_url": "https://api.github.com/users/myronmarston/repos", "gists_url": "https://api.github.com/users/myronmarston/gists{/gist_id}", "url": "https://api.github.com/users/myronmarston", "login": "myronmarston", "gravatar_id": "42d4590355a1404230fbc9aff4dd377b", "html_url": "https://github.com/myronmarston", "following_url": "https://api.github.com/users/myronmarston/following{/other_user}", "received_events_url": "https://api.github.com/users/myronmarston/received_events", "organizations_url": "https://api.github.com/users/myronmarston/orgs", "avatar_url": "https://0.gravatar.com/avatar/42d4590355a1404230fbc9aff4dd377b?d=https%3A%2F%2Fidenticons.github.com%2F6916222172eb021e5d5f0043453078b9.png", "starred_url": "https://api.github.com/users/myronmarston/starred{/owner}{/repo}", "id": 49391, "followers_url": "https://api.github.com/users/myronmarston/followers", "type": "User"}, "created_at": "2011-05-20T15:03:12Z", "id": 1210485, "owner": "rails"}
