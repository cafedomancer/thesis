{"body": "The master key itself is generated by SecureRandom when the application is generated.  Users can change this as they wish.\n\nThe session key would be derived by providing another value as the salt to PBKDF2 with the master key as the 'password.  The particular values would be probably be:\n\n```ruby\n  key_generator = KeyGenerator.new(config.secret_token)\n  cookie_signing_key = key_generator.generate_key(config.cookie_signing_salt || \"Cookie Signing Key\")\n```\n\nWe could remove the default values, but that makes upgrading a pain in the ass.  Essentially the main goal I have is that we have a reliable way to generate keys by transforming the existing secret so that we don't end up using a single as hmac, encryption key, everywhere.\n\nusing pbkdf2 to derive keys seems like a sane way to avoid that while simultaneously keeping things pretty straightforward for users.", "url": "https://api.github.com/repos/rails/rails/issues/comments/6794471", "created_at": "2012-07-06T00:25:34Z", "html_url": "https://github.com/rails/rails/pull/6952#issuecomment-6794471", "updated_at": "2012-07-06T00:25:34Z", "repo": "rails", "issue_id": 6952, "user": {"following_url": "https://api.github.com/users/NZKoz/following{/other_user}", "events_url": "https://api.github.com/users/NZKoz/events{/privacy}", "organizations_url": "https://api.github.com/users/NZKoz/orgs", "url": "https://api.github.com/users/NZKoz", "gists_url": "https://api.github.com/users/NZKoz/gists{/gist_id}", "html_url": "https://github.com/NZKoz", "subscriptions_url": "https://api.github.com/users/NZKoz/subscriptions", "avatar_url": "https://0.gravatar.com/avatar/efa76b164a7de4a5730e4fa397cc4425?d=https%3A%2F%2Fidenticons.github.com%2F85d8ce590ad8981ca2c8286f79f59954.png", "repos_url": "https://api.github.com/users/NZKoz/repos", "received_events_url": "https://api.github.com/users/NZKoz/received_events", "gravatar_id": "efa76b164a7de4a5730e4fa397cc4425", "starred_url": "https://api.github.com/users/NZKoz/starred{/owner}{/repo}", "login": "NZKoz", "type": "User", "id": 197, "followers_url": "https://api.github.com/users/NZKoz/followers"}, "owner": "rails", "_id": {"$oid": "52380195bd3543c15100c174"}, "id": 6794471, "issue_url": "https://api.github.com/repos/rails/rails/issues/6952"}
